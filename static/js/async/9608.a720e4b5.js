"use strict";(self.webpackChunkdify_chat_docs=self.webpackChunkdify_chat_docs||[]).push([["9608"],{4149:function(e,n,s){s.r(n),s.d(n,{default:()=>c});var t=s(1549),d=s(6603),a=s(2118);function r(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",pre:"pre",code:"code",h3:"h3",h4:"h4",strong:"strong",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,d.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"自定义应用配置",children:["自定义应用配置",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#自定义应用配置",children:"#"})]}),"\n",(0,t.jsxs)(n.h2,{id:"确定运行模式",children:["确定运行模式",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#确定运行模式",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"在开始配置之前，确保你的运行模式是单应用模式。"}),"\n",(0,t.jsxs)(a.mQ,{children:[(0,t.jsx)(a.OK,{label:"React SPA",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",meta:'title="packages/react-app/src/App.tsx"',children:"// 初始化全局运行时配置\ndifyChatRuntimeConfig.init('singleApp')\n"})})}),(0,t.jsx)(a.OK,{label:"Next.js",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",meta:'title="packages/nextjs-app/.env"',children:"# 运行模式\nRUNNING_MODE=singleApp\n"})})})]}),"\n",(0,t.jsxs)(n.h2,{id:"自定义应用配置-1",children:["自定义应用配置",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#自定义应用配置-1",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"Dify Chat 已经内置了多种应用配置管理方式，满足不同场景需求，你可以根据你的需求选择合适的方式。"}),"\n",(0,t.jsxs)(n.h3,{id:"react-spa-版本",children:["React SPA 版本",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#react-spa-版本",children:"#"})]}),"\n",(0,t.jsxs)(n.h4,{id:"配置入口",children:["配置入口",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置入口",children:"#"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",meta:'title="packages/react-app/src/services/app/singleApp/index.ts"',children:"// 默认使用 LocalStorage 存储\nexport { appConfig } from './localstorage'\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"内置实现",children:["内置实现",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#内置实现",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1. LocalStorage"})}),"\n",(0,t.jsx)(n.p,{children:"使用 LocalStorage 存储和修改数据，当用户切换浏览器后，数据会丢失，仅作为演示用。"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2. 静态数据"})}),"\n",(0,t.jsx)(n.p,{children:"使用静态数据进行存储，仅支持查询，适用于用户无需自定义应用的场景。"}),"\n",(0,t.jsx)(n.p,{children:"定义配置："}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="packages/react-app/src/services/app/singleApp/static-readonly/data.ts"',children:"import { AppModeEnums } from '@dify-chat/core'\n\n/**\n * 静态的应用配置，用于演示\n */\nexport const staticAppConfig = {\n	id: '0.270357011315995',\n	info: {\n		name: 'My Chatflow APP',\n		description: '我的 Chatflow 应用',\n		tags: [],\n		mode: AppModeEnums.CHATFLOW,\n	},\n	requestConfig: {\n		apiBase: 'https://api.dify.ai/v1',\n		apiKey: 'app-xxxxxxx',\n	},\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"3. Restful API"})}),"\n",(0,t.jsx)(n.p,{children:"通过接口获取和修改数据，推荐使用\uD83C\uDF1F"}),"\n",(0,t.jsxs)(n.p,{children:["默认请求的后端服务地址为 ",(0,t.jsx)(n.code,{children:"http://localhost:3000"}),"，你可以根据你的需要修改。"]}),"\n",(0,t.jsx)(n.p,{children:"如果你的后端服务地址与默认地址不一致，只需在对应的 restful 实现中，修改调用的 BaseURL 即可。"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="packages/react-app/src/services/app/singleApp/restful.ts"',children:"// 比如你的自定义后端服务地址是 http://localhost:4567\nconst API_BASE_URL = 'http://localhost:4567'\n"})}),"\n",(0,t.jsx)(n.p,{children:"你需要自行实现以下接口以完成应用配置的读取和保存："}),"\n",(0,t.jsxs)(n.table,{children:["\n",(0,t.jsxs)(n.thead,{children:["\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.th,{children:"接口名称"}),"\n",(0,t.jsx)(n.th,{children:"请求方法"}),"\n",(0,t.jsx)(n.th,{children:"接口路径"}),"\n",(0,t.jsx)(n.th,{children:"请求参数"}),"\n",(0,t.jsx)(n.th,{children:"返回参数"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.tbody,{children:["\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"获取 App 配置详情"}),"\n",(0,t.jsx)(n.td,{children:"GET"}),"\n",(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/app"})}),"\n",(0,t.jsx)(n.td,{children:"无"}),"\n",(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"IDifyAppItem"})}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"保存 App 配置"}),"\n",(0,t.jsx)(n.td,{children:"POST"}),"\n",(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/app"})}),"\n",(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"IDifyAppItem"})}),"\n",(0,t.jsx)(n.td,{children:"无"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"nextjs-版本",children:["Next.js 版本",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#nextjs-版本",children:"#"})]}),"\n",(0,t.jsxs)(n.h4,{id:"配置入口-1",children:["配置入口",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置入口-1",children:"#"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="packages/nextjs-app/services/app/singleApp/index.ts"',children:'// 使用 fs 实现\nexport { appConfig } from "./fs";\n'})}),"\n",(0,t.jsxs)(n.h4,{id:"内置实现-1",children:["内置实现",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#内置实现-1",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1. 本地文件存储"})}),"\n",(0,t.jsx)(n.p,{children:"使用本地文件进行存储，支持读取和修改，但存在丢失数据的风险。"}),"\n",(0,t.jsx)(n.p,{children:"配置示例："}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",meta:'title="packages/nextjs-app/.dify-chat/storage/app.config.json"',children:'{\n  "info": {\n    "name": "Chatflow Demo",\n    "description": "",\n    "tags": [\n      "参数",\n      "测试"\n    ],\n    "mode": "advanced-chat",\n    "author_name": "Dify"\n  },\n  "requestConfig": {\n    "apiBase": "https://api.dify.ai/v1",\n    "apiKey": "app-xxx"\n  },\n  "answerForm": {\n    "enabled": false\n  },\n  "inputParams": {\n    "enableUpdateAfterCvstStarts": false\n  },\n  "extConfig": {\n    "conversation": {\n      "openingStatement": {\n        "displayMode": "default"\n      }\n    }\n  },\n  "id": "1751257572123"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2. Restful API"})}),"\n",(0,t.jsx)(n.p,{children:"通过 API 接口管理，支持读取和修改，推荐使用\uD83C\uDF1F"}),"\n",(0,t.jsxs)(n.p,{children:["默认请求的后端服务地址为 ",(0,t.jsx)(n.code,{children:"http://localhost:3000"}),"，你可以根据你的需要修改。"]}),"\n",(0,t.jsx)(n.p,{children:"如果你的后端服务地址与默认地址不一致，只需在对应的 restful 实现中，修改调用的 BaseURL 即可。"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",meta:'title="packages/nextjs-app/services/app/singleApp/restful.ts"',children:"// 比如你的自定义后端服务地址是 http://localhost:4567\nconst API_BASE_URL = 'http://localhost:4567'\n"})}),"\n",(0,t.jsx)(n.p,{children:"你需要自行实现以下接口以完成应用配置的读取和保存："}),"\n",(0,t.jsxs)(n.table,{children:["\n",(0,t.jsxs)(n.thead,{children:["\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.th,{children:"接口名称"}),"\n",(0,t.jsx)(n.th,{children:"请求方法"}),"\n",(0,t.jsx)(n.th,{children:"接口路径"}),"\n",(0,t.jsx)(n.th,{children:"请求参数"}),"\n",(0,t.jsx)(n.th,{children:"返回参数"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.tbody,{children:["\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"获取 App 配置详情"}),"\n",(0,t.jsx)(n.td,{children:"GET"}),"\n",(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/app"})}),"\n",(0,t.jsx)(n.td,{children:"无"}),"\n",(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"IDifyAppItem"})}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"保存 App 配置"}),"\n",(0,t.jsx)(n.td,{children:"POST"}),"\n",(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/app"})}),"\n",(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"IDifyAppItem"})}),"\n",(0,t.jsx)(n.td,{children:"无"}),"\n"]}),"\n"]}),"\n"]})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.ah)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}let c=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["v0.4.x%2Fguide%2Fapp-config%2Fconfig-single%2Fcustom-app-config.mdx"]={toc:[{text:"确定运行模式",id:"确定运行模式",depth:2},{text:"自定义应用配置",id:"自定义应用配置-1",depth:2},{text:"React SPA 版本",id:"react-spa-版本",depth:3},{text:"配置入口",id:"配置入口",depth:4},{text:"内置实现",id:"内置实现",depth:4},{text:"Next.js 版本",id:"nextjs-版本",depth:3},{text:"配置入口",id:"配置入口-1",depth:4},{text:"内置实现",id:"内置实现-1",depth:4}],title:"自定义应用配置",headingTitle:"自定义应用配置",frontmatter:{}}}}]);