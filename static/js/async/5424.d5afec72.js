"use strict";(self.webpackChunkdify_chat_docs=self.webpackChunkdify_chat_docs||[]).push([["5424"],{3860:function(e,r,n){n.r(r),n.d(r,{default:()=>s});var d=n(1549),a=n(6603);function h(e){let r=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",pre:"pre",code:"code",blockquote:"blockquote",ul:"ul",li:"li"},(0,a.ah)(),e.components);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r.h1,{id:"docker-compose-一键部署",children:["Docker Compose 一键部署",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#docker-compose-一键部署",children:"#"})]}),"\n",(0,d.jsx)(r.p,{children:"使用 Docker Compose 时，我们提供了两种方式供你部署，你可以按需选用。"}),"\n",(0,d.jsxs)(r.h2,{id:"直接部署",children:["直接部署",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#直接部署",children:"#"})]}),"\n",(0,d.jsx)(r.p,{children:"这种方式适用于无需二开的场景，你不需要 clone 源码，直接使用官方镜像部署即可。"}),"\n",(0,d.jsxs)(r.h3,{id:"1-准备工作目录",children:["1. 准备工作目录",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#1-准备工作目录",children:"#"})]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-bash",children:"mkdir dify-chat && cd dify-chat\n"})}),"\n",(0,d.jsxs)(r.h3,{id:"2-下载配置文件",children:["2. 下载配置文件",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#2-下载配置文件",children:"#"})]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-bash",children:"curl -O https://raw.githubusercontent.com/lexmin0412/dify-chat/main/docker-compose.yml\n"})}),"\n",(0,d.jsxs)(r.h3,{id:"3-修改配置",children:["3. 修改配置",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#3-修改配置",children:"#"})]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-bash",children:"# 编辑配置文件, 需要配置 DATABASE_URL 为实际的数据库连接地址（MySql）\nnano docker-compose.yml\n"})}),"\n",(0,d.jsxs)(r.h3,{id:"4-启动容器",children:["4. 启动容器",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#4-启动容器",children:"#"})]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-bash",children:"docker-compose -f docker-compose.yml up -d\n"})}),"\n",(0,d.jsxs)(r.h3,{id:"5-访问应用",children:["5. 访问应用",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#5-访问应用",children:"#"})]}),"\n",(0,d.jsxs)(r.blockquote,{children:["\n",(0,d.jsx)(r.p,{children:"serverip 是你的服务器 IP，如果是本机启动，直接使用 localhost 访问即可"}),"\n"]}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:["React App: ",(0,d.jsx)(r.a,{href:"http://serverip:5200",target:"_blank",rel:"noopener noreferrer",children:"http://serverip:5200"})]}),"\n",(0,d.jsxs)(r.li,{children:["Platform API: ",(0,d.jsx)(r.a,{href:"http://serverip:5300",target:"_blank",rel:"noopener noreferrer",children:"http://serverip:5300"})]}),"\n"]}),"\n",(0,d.jsxs)(r.h2,{id:"二开后自行构建镜像",children:["二开后自行构建镜像",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#二开后自行构建镜像",children:"#"})]}),"\n",(0,d.jsx)(r.p,{children:"如果需要对 Dify Chat 进行二开，你需要 clone 源码并自行构建镜像。"}),"\n",(0,d.jsxs)(r.h3,{id:"1-clone-代码仓库",children:["1. Clone 代码仓库",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#1-clone-代码仓库",children:"#"})]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-bash",children:"git clone git@github.com:lexmin0412/dify-chat.git\n"})}),"\n",(0,d.jsxs)(r.h3,{id:"2-配置本地环境变量",children:["2. 配置本地环境变量",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#2-配置本地环境变量",children:"#"})]}),"\n",(0,d.jsx)(r.p,{children:"复制 react-app 的环境变量配置文件："}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-bash",children:"cd packages/react-app\ncp .env.template .env\n"})}),"\n",(0,d.jsx)(r.p,{children:"复制 platform 的环境变量配置文件："}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-bash",children:"cd packages/platform\ncp .env.template .env\n"})}),"\n",(0,d.jsxs)(r.p,{children:["注意：默认情况下，Dify Chat 使用 MySQL 进行应用配置的持久化存储，如果你需要配置其他类型的数据库，请查看 ",(0,d.jsx)(r.a,{href:"/guide/deploy/db-config#2-%E4%BD%BF%E7%94%A8%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E5%BA%93",children:"使用其他数据库"}),"。"]}),"\n",(0,d.jsxs)(r.h3,{id:"3-修改源码",children:["3. 修改源码",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#3-修改源码",children:"#"})]}),"\n",(0,d.jsx)(r.p,{children:"修改代码并自测。"}),"\n",(0,d.jsxs)(r.h3,{id:"4-基于本地代码构建镜像并启动",children:["4. 基于本地代码构建镜像并启动",(0,d.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#4-基于本地代码构建镜像并启动",children:"#"})]}),"\n",(0,d.jsx)(r.p,{children:"对于二开场景，我们准备了一个专用的 docker compose 配置文件，你可以直接使用，它会读取对应子包下的 .env 文件作为环境变量启动容器。"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-bash",children:"docker-compose -f docker-compose.dev.yml up -d\n"})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,a.ah)(),e.components);return r?(0,d.jsx)(r,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}let s=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["Latest%2Fguide%2Fdeploy%2Fdocker-compose.md"]={toc:[{text:"直接部署",id:"直接部署",depth:2},{text:"1. 准备工作目录",id:"1-准备工作目录",depth:3},{text:"2. 下载配置文件",id:"2-下载配置文件",depth:3},{text:"3. 修改配置",id:"3-修改配置",depth:3},{text:"4. 启动容器",id:"4-启动容器",depth:3},{text:"5. 访问应用",id:"5-访问应用",depth:3},{text:"二开后自行构建镜像",id:"二开后自行构建镜像",depth:2},{text:"1. Clone 代码仓库",id:"1-clone-代码仓库",depth:3},{text:"2. 配置本地环境变量",id:"2-配置本地环境变量",depth:3},{text:"3. 修改源码",id:"3-修改源码",depth:3},{text:"4. 基于本地代码构建镜像并启动",id:"4-基于本地代码构建镜像并启动",depth:3}],title:"Docker Compose 一键部署",headingTitle:"Docker Compose 一键部署",frontmatter:{}}}}]);