"use strict";(self.webpackChunkdify_chat_docs=self.webpackChunkdify_chat_docs||[]).push([["2884"],{3770:function(e,n,r){r.r(n),r.d(n,{default:()=>d});var s=r(1549),a=r(6603);function i(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",code:"code",img:"img",pre:"pre",blockquote:"blockquote",h3:"h3",strong:"strong"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"内容渲染",children:["内容渲染",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#内容渲染",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Dify Chat 支持对 AI 回复的各种内容进行渲染，包括图片、视频、代码、图表，以及 Dify 自身返回的各种特殊格式。"}),"\n",(0,s.jsxs)(n.h2,{id:"深度思考标签",children:["深度思考标签",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#深度思考标签",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"目前流行的深度思考标签主要有两种："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<think>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<details>"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"以上两种标签在 Dify Chat 中都被很好地支持，展示效果如下："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/sample_think_tag.png",alt:"深度思考"})}),"\n",(0,s.jsxs)(n.h2,{id:"chatflow--workflow-工作流日志",children:["Chatflow / Workflow 工作流日志",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#chatflow--workflow-工作流日志",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"在 Dify 的 Chatflow/Workflow 类型应用运行时，Dify API 会返回工作流日志，展示形式如下："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/sample_workflow.png",alt:"Workflow Logs"})}),"\n",(0,s.jsxs)(n.h2,{id:"agent-调用工具",children:["Agent 调用工具",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#agent-调用工具",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"在 Dify 的 Agent 类型应用运行时，如果有调用到工具，Dify API 会返回工具的调用日志，展示形式如下："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/guide_app_agent.png",alt:"Agent 调用工具截图"})}),"\n",(0,s.jsxs)(n.h2,{id:"知识库引用链接",children:["知识库引用链接",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#知识库引用链接",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"在 AI 回复过程中，如果引用到了知识库的内容，展示效果如下："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/sample_knowledge_base_link.png",alt:"知识库引用"})}),"\n",(0,s.jsx)(n.p,{children:"当鼠标 hover 到引用链接上时，会展示具体的片段："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/sample_knowledge_base_link_hover.png",alt:"知识库引用-详情"})}),"\n",(0,s.jsxs)(n.h2,{id:"echarts-图表",children:["Echarts 图表",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#echarts-图表",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"支持渲染通过官方的图表插件生成的，或符合 Echarts 数据格式的代码块为图表："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/sample_echarts.png",alt:"Echarts"})}),"\n",(0,s.jsxs)(n.h2,{id:"mermaid-图表",children:["Mermaid 图表",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#mermaid-图表",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Mermaid 是一种流行的文本绘图格式，展示效果如下："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/guide__sample_mermaid.png",alt:"Mermaid"})}),"\n",(0,s.jsxs)(n.h2,{id:"文件卡片",children:["文件卡片",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#文件卡片",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"如果用户发送或者 AI 回复了文件，在对话中的展示效果如下："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/sample_file.jpg",alt:"文件卡片"})}),"\n",(0,s.jsxs)(n.h2,{id:"回复表单",children:["回复表单",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#回复表单",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Dify 支持通过 ",(0,s.jsx)(n.code,{children:"jinja2"})," 来配置回复表单供用户填写，本项目也支持了对应的功能。"]}),"\n",(0,s.jsx)(n.p,{children:"Dify Chatflow 编排的回复内容示例："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<form data-format="json">\n  <label for="username">用户名字:</label>\n  <input type="text" name="username" value="{{ username }}" />\n  <label for="phone">联系电话:</label>\n  <input type="text" name="phone" value="{{ phone }}" />\n  <label for="content">投诉内容:</label>\n  <textarea name="content"></textarea>\n  <button data-size="small" data-variant="primary">提交</button>\n</form>\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"注意："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["你需要自行在 Chatflow 中对 ",(0,s.jsx)(n.code,{children:"sys.query"})," 进行正确的逻辑处理，区分普通消息、触发表单的消息及提交信息。"]}),"\n",(0,s.jsxs)(n.li,{children:["form 标签的 ",(0,s.jsx)(n.code,{children:"data-format"})," 属性用于指定表单数据的格式，目前支持 ",(0,s.jsx)(n.code,{children:"json"})," 和 ",(0,s.jsx)(n.code,{children:"text"})," 两种格式。"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"按照上面的内容回复后，默认情况下，在用户点击表单的提交按钮后，会将表单的值对象作为消息发送给同一个 Dify 应用，同时会在消息列表中展示。提交消息的示例文本："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "username": "lexmin",\n  "phone": "13123456789",\n  "content": "快递太慢啦，我要举报",\n  "isFormSubmit": true\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["其中，",(0,s.jsx)(n.code,{children:"isFormSubmit"})," 字段用于标识这是一个表单提交的消息, 你可以在 Chatflow 编排的条件分支中使用它来进行判断消息类型。"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/guide__sample_form.png",alt:"回复表单"})}),"\n",(0,s.jsxs)(n.h3,{id:"自定义提交消息文本",children:["自定义提交消息文本",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#自定义提交消息文本",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"如果你不想展示具体的表单值 json 字符串，而是需要自定义发送的消息文本，可以按照下面的指引，在应用配置中进行配置（此配置只影响界面展示，实际提交到 Dify Chatflow 开始节点的仍然是用户填写的表单值 json 字符串）。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"多应用模式"})}),"\n",(0,s.jsx)(n.p,{children:"在添加/更新应用配置弹窗中填写字段："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'表单回复 - 设置为 "启用"'}),"\n",(0,s.jsx)(n.li,{children:'提交消息文本 - 用于替换表单值对象的文本，如 "我提交了一个表单"'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/guide__sample_form_answer_config.png",alt:"回复表单-配置"})}),"\n",(0,s.jsx)(n.p,{children:"按照如上配置后，效果如下："}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"/guide__sample_form.png",alt:"回复表单"})})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}let d=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["Latest%2Fguide%2Ffeatures%2Fmarkdown-render.md"]={toc:[{text:"深度思考标签",id:"深度思考标签",depth:2},{text:"Chatflow / Workflow 工作流日志",id:"chatflow--workflow-工作流日志",depth:2},{text:"Agent 调用工具",id:"agent-调用工具",depth:2},{text:"知识库引用链接",id:"知识库引用链接",depth:2},{text:"Echarts 图表",id:"echarts-图表",depth:2},{text:"Mermaid 图表",id:"mermaid-图表",depth:2},{text:"文件卡片",id:"文件卡片",depth:2},{text:"回复表单",id:"回复表单",depth:2},{text:"自定义提交消息文本",id:"自定义提交消息文本",depth:3}],title:"内容渲染",headingTitle:"内容渲染",frontmatter:{}}}}]);