"use strict";(self.webpackChunkdify_chat_docs=self.webpackChunkdify_chat_docs||[]).push([["7346"],{3825:function(e,r,n){n.r(r),n.d(r,{default:()=>d});var t=n(1549),c=n(6603);function s(e){let r=Object.assign({h1:"h1",a:"a",div:"div",p:"p",h2:"h2",pre:"pre",code:"code",blockquote:"blockquote"},(0,c.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.h1,{id:"部署---使用-docker",children:["部署 - 使用 Docker",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#部署---使用-docker",children:"#"})]}),"\n",(0,t.jsxs)(r.div,{className:"rspress-directive tip",children:[(0,t.jsx)(r.div,{className:"rspress-directive-title",children:"TIP"}),(0,t.jsx)(r.div,{className:"rspress-directive-content",children:(0,t.jsxs)(r.p,{children:["本章节内容及 Docker 容器化部署功能由社区贡献者 @",(0,t.jsx)(r.a,{href:"https://github.com/hitechbeijing",target:"_blank",rel:"noopener noreferrer",children:"@hitechbeijing"})," 提供。\n"]})})]}),"\n",(0,t.jsxs)(r.h2,{id:"容器运行",children:["容器运行",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#容器运行",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"进入docker目录启动容器编排："}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"docker compose up dify-chat -d\n"})}),"\n",(0,t.jsxs)(r.p,{children:["浏览器访问",(0,t.jsx)(r.a,{href:"http://127.0.0.1:8080/dify-chat/",target:"_blank",rel:"noopener noreferrer",children:"http://127.0.0.1:8080/dify-chat/"})]}),"\n",(0,t.jsx)(r.p,{children:"容器默认暴露http端口8080，https端口8443，可修改.env文件配置环境变量"}),"\n",(0,t.jsx)(r.p,{children:"默认配置的docker镜像为多应用模式，如需自定义使用（如单应用模式）请自行构建docker镜像"}),"\n",(0,t.jsxs)(r.h2,{id:"使用certbot全自动签发letsencrypt免费ssl证书",children:["使用certbot全自动签发letsencrypt免费ssl证书",(0,t.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#使用certbot全自动签发letsencrypt免费ssl证书",children:"#"})]}),"\n",(0,t.jsx)(r.p,{children:"在操作之前请编辑.env文件修改以下几个参数："}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"NGINX_HTTPS_ENABLED=true\n#域名\nNGINX_SERVER_NAME\n#待申请证书的域名\nCERTBOT_DOMAIN\nNGINX_ENABLE_CERTBOT_CHALLENGE=true\n#域名邮箱，随便写\nCERTBOT_EMAIL\n#更多证书申请参数，可留空\nCERTBOT_OPTIONS\n"})}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:["注意：请确保你配置的域名可以使用80端口访问到你的 dify-chat 站点，详见：",(0,t.jsx)(r.a,{href:"https://eff-certbot.readthedocs.io/en/latest/install.html#alternative-1-docker",target:"_blank",rel:"noopener noreferrer",children:"https://eff-certbot.readthedocs.io/en/latest/install.html#alternative-1-docker"})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"在docker目录执行命令即可全自动申请、签发证书："}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"docker-compose --profile certbot up\n"})}),"\n",(0,t.jsx)(r.p,{children:"签发的证书在[docker/certbot/conf/live/你的域名]目录下。"}),"\n",(0,t.jsx)(r.p,{children:"注意：以上路径的证书文件为替身，如需将证书用在其他项目上需要在[docker/certbot/conf/archive/你的域名]目录下获取真实证书文件"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-txt",children:"`privkey.pem`  : the private key for your certificate.\n`fullchain.pem`: the certificate file used in most server software.\n`chain.pem`    : used for OCSP stapling in Nginx >=1.3.7.\n`cert.pem`     : will break many server configurations, and should not be used\n                 without reading further documentation (see link below).\n"})}),"\n",(0,t.jsx)(r.p,{children:"![注意：证书需要定期续期]"})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,c.ah)(),e.components);return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(s,{...e})}):s(e)}let d=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["Latest%2Fguide%2Fdevelopment%2Fdeploy-docker.mdx"]={toc:[{text:"容器运行",id:"容器运行",depth:2},{text:"使用certbot全自动签发letsencrypt免费ssl证书",id:"使用certbot全自动签发letsencrypt免费ssl证书",depth:2}],title:"部署 - 使用 Docker",headingTitle:"部署 - 使用 Docker",frontmatter:{}}}}]);