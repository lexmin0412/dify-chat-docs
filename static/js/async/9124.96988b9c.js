"use strict";(self.webpackChunkdify_chat_docs=self.webpackChunkdify_chat_docs||[]).push([["9124"],{6368:function(e,s,i){i.r(s),i.d(s,{default:()=>a});var n=i(1549),r=i(6603);function c(e){let s=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",div:"div",code:"code",h2:"h2",pre:"pre"},(0,r.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"从-v030-迁移",children:["从 v0.3.0 迁移",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#从-v030-迁移",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"在本小节，我们将介绍如何从 v0.3.0 升级。"}),"\n",(0,n.jsx)(s.p,{children:"如果你是老版本的 React APP 用户，请根据你的具体情况，进行正确的操作："}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"如果你没有对代码进行过任何修改，请直接拉取 v0.4.0 Tag 后重新构建部署即可，本次升级对你来说将是无感的"}),"\n",(0,n.jsx)(s.li,{children:"如果你修改过代码并且想要使用当前版本新增的功能，那么请遵循下面的步骤进行升级"}),"\n"]}),"\n",(0,n.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,n.jsx)(s.div,{className:"rspress-directive-title",children:"WARNING"}),(0,n.jsxs)(s.div,{className:"rspress-directive-content",children:[(0,n.jsxs)(s.p,{children:["在 v0.4.0 版本中，我们完全弃用了 ",(0,n.jsx)(s.code,{children:"DifyChatProvider"})," 和 ",(0,n.jsx)(s.code,{children:"useDifyChat"}),", 这简化了组件嵌套关系。"]}),"\n",(0,n.jsxs)(s.p,{children:["原来的 ",(0,n.jsx)(s.code,{children:"DifyChatProvider"})," 承载的配置初始化功能，现在被分拆为几个部分。\n"]})]})]}),"\n",(0,n.jsxs)(s.h2,{id:"1-初始化运行模式",children:["1. 初始化运行模式",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#1-初始化运行模式",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["在 ",(0,n.jsx)(s.code,{children:"packages/react-app/src/App.tsx"})," 中，初始化运行模式："]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-tsx",meta:'title="packages/react-app/src/App.tsx"',children:"// 初始化全局运行时配置\ndifyChatRuntimeConfig.init('multiApp')\n"})}),"\n",(0,n.jsxs)(s.h2,{id:"2-初始化应用配置管理服务",children:["2. 初始化应用配置管理服务",(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#2-初始化应用配置管理服务",children:"#"})]}),"\n",(0,n.jsx)(s.p,{children:"现在的应用配置管理服务将会在需要使用时自动引入，依据不同的运行模式，入口分别如下："}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["单应用模式：",(0,n.jsx)(s.code,{children:"/packages/react-app/src/services/app/singleApp/index.ts"})]}),"\n",(0,n.jsxs)(s.li,{children:["多应用模式：",(0,n.jsx)(s.code,{children:"/packages/react-app/src/services/app/multiApp/index.ts"})]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["你要做的是，在上面的入口文件中，导出你所使用的 ",(0,n.jsx)(s.code,{children:"appService"})," 即可。"]}),"\n",(0,n.jsx)(s.p,{children:"以多应用模式为例："}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ts",meta:'title="packages/react-app/src/services/app/multiApp/index.ts"',children:"import DifyAppService from './localstorage'\n\nexport const appService = new DifyAppService()\n"})}),"\n",(0,n.jsxs)(s.h2,{id:"3-初始化-userid-和-enablesetting",children:["3. 初始化 ",(0,n.jsx)(s.code,{children:"userId"})," 和 ",(0,n.jsx)(s.code,{children:"enableSetting"}),(0,n.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#3-初始化-userid-和-enablesetting",children:"#"})]}),"\n",(0,n.jsxs)(s.p,{children:["在 v0.4.0 中，新增了一个真正意义上的授权登录页面，你可以查看 ",(0,n.jsx)(s.a,{href:"https://docs.dify-chat.lexmin.cn/guide/app-config/custom-user-info.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF",target:"_blank",rel:"noopener noreferrer",children:"自定义用户信息"})," 文档, 自定义你的用户信息获取和更新逻辑。"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,r.ah)(),e.components);return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}let a=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["v0.5.x%2Fguide%2Fmigrate%2Ffrom_v0.3.0.mdx"]={toc:[{text:"1. 初始化运行模式",id:"1-初始化运行模式",depth:2},{text:"2. 初始化应用配置管理服务",id:"2-初始化应用配置管理服务",depth:2},{text:"3. 初始化 `userId` 和 `enableSetting`",id:"3-初始化-userid-和-enablesetting",depth:2}],title:"从 v0.3.0 迁移",headingTitle:"从 v0.3.0 迁移",frontmatter:{}}}}]);