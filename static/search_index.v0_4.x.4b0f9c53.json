[{"id":34,"title":"FAQ","content":"#\n\nQ: pnpm install 报错 Cannot find matching keyid: ${JSON.stringify({ signatures,\nkeys })}\n\nA: 先运行 COREPACK_INTEGRITY_KEYS=0 corepack prepare 再执行 pnpm install。","routePath":"/dify-chat-docs/v0.4.x/faq","lang":"","toc":[],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":35,"title":"自定义应用配置管理","content":"#\n\n为方便演示, 在 React SPA 版本中，我们默认使用 LocalStorage 进行应用配置管理，而在 Next.js 版本中，我们默认使用的是本地\nJSON 文件。\n\n如果你想自定义应用配置管理服务，请阅读以下内容。\n\n\n确定运行模式#\n\n在开始配置之前，确保你的运行模式是多应用模式。\n\n\n自定义应用配置管理#\n\n\nReact SPA 版本#\n\n配置入口#\n\n\n\n内置实现#\n\n1. LocalStorage\n\n使用 LocalStorage 数据进行存储，当用户切换浏览器后，数据会丢失，仅作为演示用。\n\n2. 静态数据\n\n使用静态数据进行存储，仅支持查询，不支持修改数据，适用于用户无需自定义应用的场景。\n\n定义用户可访问的应用列表：\n\n\n\n3. Restful API\n\n通过接口获取和修改数据，推荐使用🌟\n\n默认请求的后端服务地址为 http://localhost:3000，你可以根据你的需要修改。\n\n启动后端服务：\n\n\n\n自定义后端服务#\n\n如果内置的 Restful 实现无法满足你的需求，你可以自定义你的后端服务，请遵循以下步骤进行操作。\n\n首先，修改后端服务地址为你的自定义地址。\n\n\n\n然后，实现以下接口：\n\n接口名称          请求方法     接口路径        请求参数           返回参数\n获取 App 配置列表   GET      /apps       无              IDifyAppItem[]\n获取 App 配置详情   GET      /apps/:id   无              IDifyAppItem\n添加 App 配置     POST     /apps       IDifyAppItem   无\n更新 App 配置     PUT      /apps/:id   IDifyAppItem   无\n删除 App 配置     DELETE   /apps/:id   无              无\n\n\nNext.js 版本#\n\n配置入口#\n\n\n\n内置实现#\n\n1. 本地文件存储\n\n使用本地文件进行存储，支持完整的 CRUD，但存在丢失数据的风险。\n\n配置示例：\n\n\n\n2. Restful API\n\n通过 API 接口管理，支持完整的 CRUD，推荐使用🌟\n\n默认请求的后端服务地址为 http://localhost:3000，你可以根据你的需要修改。\n\n启动后端服务：\n\n\n\n自定义后端服务#\n\n如果内置的 Restful 实现无法满足你的需求，你可以自定义你的后端服务，请遵循以下步骤进行操作。\n\n首先，修改后端服务地址为你的自定义地址。\n\n\n\n然后，实现以下接口：\n\n接口名称          请求方法     接口路径        请求参数           返回参数\n获取 App 配置列表   GET      /apps       无              IDifyAppItem[]\n获取 App 配置详情   GET      /apps/:id   无              IDifyAppItem\n添加 App 配置     POST     /apps       IDifyAppItem   无\n更新 App 配置     PUT      /apps/:id   IDifyAppItem   无\n删除 App 配置     DELETE   /apps/:id   无              无","routePath":"/dify-chat-docs/v0.4.x/guide/app-config/config-multiple/custom-app-service","lang":"","toc":[{"text":"确定运行模式","id":"确定运行模式","depth":2,"charIndex":117},{"text":"自定义应用配置管理","id":"自定义应用配置管理-1","depth":2,"charIndex":-1},{"text":"React SPA 版本","id":"react-spa-版本","depth":3,"charIndex":165},{"text":"配置入口","id":"配置入口","depth":4,"charIndex":180},{"text":"内置实现","id":"内置实现","depth":4,"charIndex":189},{"text":"自定义后端服务","id":"自定义后端服务","depth":4,"charIndex":426},{"text":"Next.js 版本","id":"nextjs-版本","depth":3,"charIndex":865},{"text":"配置入口","id":"配置入口-1","depth":4,"charIndex":878},{"text":"内置实现","id":"内置实现-1","depth":4,"charIndex":887},{"text":"自定义后端服务","id":"自定义后端服务-1","depth":4,"charIndex":1056}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":36,"title":"按需修改代码","content":"#\n\n我们提供了 React SPA 和 Next.js 两种技术实现，下面的内容将会分两种技术栈进行讲解，你可以按照你的喜好进行选择阅读。\n\n\nReact SPA#\n\n> 注意：为行文简洁，本小节下所有的路径表示省略 packages/react-app 前缀, 如 src/App.tsx, 实际路径为\n> packages/react-app/src/App.tsx。\n\n\n0. 选定运行模式#\n\n在上一节 选择适合你的模式 中，我们已经选定了应用模式。\n\n默认情况下，代码中的运行模式为 \"多应用\"，你可以在 src/App.tsx 中，看到初始化全局运行时配置的代码：\n\n\n\n如果你想要以单应用模式运行，需要对 difyChatRuntimeConfig.init() 的参数进行修改：\n\n\n\n\n1. 自定义应用配置管理#\n\n默认情况下，为方便演示，我们使用 LocalStorage 进行应用配置的存储。你可以在 src/services/app 中看到：\n\n多应用模式：\n\n\n\n单应用模式：\n\n\n\n在 src/services/app 在，分别有 multiApp 和 singleApp 两个目录，其下又分别有三种应用配置存储的实现形式：\n\n * static-readonly, 写死在代码中的数据，只支持查询，不支持修改数据\n * localstorage, 使用 LocalStorage 存储，支持完整的 CRUD，但无法跨浏览器同步\n * restful, 通过 API 接口存储，支持完整的 CRUD，推荐使用🌟\n\n你可以根据你的需要自行选择，也可以修改代码或扩展其他实现形式，最终只要通过 src/services/app/multiApp/index.ts 或者\nsrc/services/app/singleApp/index.ts 导出即可。\n\n1.1 自定义 Restful 实现#\n\n如果需要自定义你的后端服务，请遵循以下步骤进行操作。\n\n首先，参考 packages/server，实现以下接口：\n\n * 获取 App 配置列表\n * 获取 App 配置详情\n * 添加 App 配置\n * 更新 App 配置\n * 删除 App 配置\n\n然后在 src/services/app/multiApp 中新建一个文件，只需要继承抽象类 DifyAppStore 并实现它的所有方法,\n调用在上述服务中对应的接口即可。\n\n1.2 展示固定的应用列表数据#\n\n修改 src/services/app/multiApp/static-readonly/data.ts 中的数据。\n\n\n\n\nNext.js#\n\n\n0. 选定运行模式#\n\n在上一节 选择适合你的模式 中，你应该已经按需选好了应用模式，接下来让我们开始配置。\n\n> 注意：为行文简洁，本小节下所有的路径表示省略 packages/nextjs-app 前缀, 如 .env.template, 实际路径为\n> packages/nextjs-app/.env.template。\n\n将 .env.template 复制为 .env 文件：\n\n\n\n默认情况下，代码中的运行模式为 \"多应用\"，你可以在 .env 中进行修改：\n\n\n1. 选定存储方式#\n\n默认情况下，我们使用文件系统进行应用配置存储。你可以在 services/app/index.ts 中看到具体使用的存储方式：\n\n\n\n在 services/app 目录下，实现了两种应用配置的存储形式：\n\n * fs, 基于本地文件的存储，支持完整的 CRUD，但存在丢失数据的风险\n * restful, 通过 API 接口管理，支持完整的 CRUD，推荐使用🌟\n\n你可以根据你的需要自行选择，也可以修改代码或扩展其他实现形式，最终只要通过 services/app/index.ts 导出即可。","routePath":"/dify-chat-docs/v0.4.x/guide/app-config/config-multiple/modify-code","lang":"","toc":[{"text":"React SPA","id":"react-spa","depth":2,"charIndex":72},{"text":"0. 选定运行模式","id":"0-选定运行模式","depth":3,"charIndex":189},{"text":"1. 自定义应用配置管理","id":"1-自定义应用配置管理","depth":3,"charIndex":352},{"text":"1.1 自定义 Restful 实现","id":"11-自定义-restful-实现","depth":4,"charIndex":791},{"text":"1.2 展示固定的应用列表数据","id":"12-展示固定的应用列表数据","depth":4,"charIndex":1030},{"text":"Next.js","id":"nextjs","depth":2,"charIndex":1111},{"text":"0. 选定运行模式","id":"0-选定运行模式-1","depth":3,"charIndex":1122},{"text":"1. 选定存储方式","id":"1-选定存储方式","depth":3,"charIndex":1361}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":37,"title":"开始配置","content":"#\n\n访问项目界面，如果之前没有存量数据，第一次进入页面时会展示缺省状态，你需要点击页面底部的 \"添加应用配置\" 按钮：\n\n\n\n此时会弹出添加应用配置的表单抽屉：\n\n\n\n依次填入应用信息：\n\n * 请求配置：在 30 秒试用 中获取的 API Base 和 API Secret\n * 应用类型：默认是聊天助手，如果是其他类型应用，需要切换到对应的类型\n * 其他配置非必需，先保持默认值，后续需要再编辑即可\n\n\n\n点击确定按钮，提示 “添加配置成功”，在应用列表中会多出一条数据：\n\n\n\n此时你可以点击应用卡片右上角的 \"更多\" 图标，对应用进行编辑和删除操作：\n\n\n\n点击应用卡片，即可进入应用详情页开始对话：\n\n","routePath":"/dify-chat-docs/v0.4.x/guide/app-config/config-multiple/start","lang":"","toc":[],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":38,"title":"自定义应用配置","content":"#\n\n\n确定运行模式#\n\n在开始配置之前，确保你的运行模式是单应用模式。\n\n\n自定义应用配置#\n\nDify Chat 已经内置了多种应用配置管理方式，满足不同场景需求，你可以根据你的需求选择合适的方式。\n\n\nReact SPA 版本#\n\n配置入口#\n\n\n\n内置实现#\n\n1. LocalStorage\n\n使用 LocalStorage 存储和修改数据，当用户切换浏览器后，数据会丢失，仅作为演示用。\n\n2. 静态数据\n\n使用静态数据进行存储，仅支持查询，适用于用户无需自定义应用的场景。\n\n定义配置：\n\n\n\n3. Restful API\n\n通过接口获取和修改数据，推荐使用🌟\n\n默认请求的后端服务地址为 http://localhost:3000，你可以根据你的需要修改。\n\n如果你的后端服务地址与默认地址不一致，只需在对应的 restful 实现中，修改调用的 BaseURL 即可。\n\n\n\n你需要自行实现以下接口以完成应用配置的读取和保存：\n\n接口名称          请求方法   接口路径   请求参数           返回参数\n获取 App 配置详情   GET    /app   无              IDifyAppItem\n保存 App 配置     POST   /app   IDifyAppItem   无\n\n\nNext.js 版本#\n\n配置入口#\n\n\n\n内置实现#\n\n1. 本地文件存储\n\n使用本地文件进行存储，支持读取和修改，但存在丢失数据的风险。\n\n配置示例：\n\n\n\n2. Restful API\n\n通过 API 接口管理，支持读取和修改，推荐使用🌟\n\n默认请求的后端服务地址为 http://localhost:3000，你可以根据你的需要修改。\n\n如果你的后端服务地址与默认地址不一致，只需在对应的 restful 实现中，修改调用的 BaseURL 即可。\n\n\n\n你需要自行实现以下接口以完成应用配置的读取和保存：\n\n接口名称          请求方法   接口路径   请求参数           返回参数\n获取 App 配置详情   GET    /app   无              IDifyAppItem\n保存 App 配置     POST   /app   IDifyAppItem   无","routePath":"/dify-chat-docs/v0.4.x/guide/app-config/config-single/custom-app-config","lang":"","toc":[{"text":"确定运行模式","id":"确定运行模式","depth":2,"charIndex":3},{"text":"自定义应用配置","id":"自定义应用配置-1","depth":2,"charIndex":-1},{"text":"React SPA 版本","id":"react-spa-版本","depth":3,"charIndex":103},{"text":"配置入口","id":"配置入口","depth":4,"charIndex":118},{"text":"内置实现","id":"内置实现","depth":4,"charIndex":127},{"text":"Next.js 版本","id":"nextjs-版本","depth":3,"charIndex":575},{"text":"配置入口","id":"配置入口-1","depth":4,"charIndex":588},{"text":"内置实现","id":"内置实现-1","depth":4,"charIndex":597}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":39,"title":"按需修改代码","content":"#\n\n我们提供了 React SPA 和 Next.js 两种技术实现，下面的内容将会分两种技术栈进行讲解，你可以按照你的喜好进行选择阅读。\n\n\nReact SPA#\n\n> 注意：为行文简洁，本小节下所有的路径表示省略 packages/react-app 前缀, 如 src/App.tsx, 实际路径为\n> packages/react-app/src/App.tsx。\n\n\n0. 选定运行模式#\n\n在上一节 选择适合你的模式 中，我们已经选定了应用模式。\n\n默认情况下，代码中的运行模式为 \"多应用\"，你可以在 src/App.tsx 中，看到初始化全局运行时配置的代码：\n\n\n\n如果你想要以单应用模式运行，需要对 difyChatRuntimeConfig.init() 的参数进行修改：\n\n\n\n\n1. 自定义应用配置管理#\n\n默认情况下，为方便演示，我们使用 LocalStorage 进行应用配置的存储。你可以在 src/services/app 中看到：\n\n多应用模式：\n\n\n\n单应用模式：\n\n\n\n在 src/services/app 在，分别有 multiApp 和 singleApp 两个目录，其下又分别有三种应用配置存储的实现形式：\n\n * static-readonly, 写死在代码中的数据，只支持查询，不支持修改数据\n * localstorage, 使用 LocalStorage 存储，支持完整的 CRUD，但无法跨浏览器同步\n * restful, 通过 API 接口存储，支持完整的 CRUD，推荐使用🌟\n\n你可以根据你的需要自行选择，也可以修改代码或扩展其他实现形式，最终只要通过 src/services/app/multiApp/index.ts 或者\nsrc/services/app/singleApp/index.ts 导出即可。\n\n1.1 自定义 Restful 实现#\n\n如果需要自定义你的后端服务，请遵循以下步骤进行操作。\n\n首先，参考 packages/server，实现以下接口：\n\n * 获取 App 配置列表\n * 获取 App 配置详情\n * 添加 App 配置\n * 更新 App 配置\n * 删除 App 配置\n\n然后在 src/services/app/multiApp 中新建一个文件，只需要继承抽象类 DifyAppStore 并实现它的所有方法,\n调用在上述服务中对应的接口即可。\n\n1.2 展示固定的应用列表数据#\n\n修改 src/services/app/multiApp/static-readonly/data.ts 中的数据。\n\n\n\n\nNext.js#\n\n\n0. 选定运行模式#\n\n在上一节 选择适合你的模式 中，你应该已经按需选好了应用模式，接下来让我们开始配置。\n\n> 注意：为行文简洁，本小节下所有的路径表示省略 packages/nextjs-app 前缀, 如 .env.template, 实际路径为\n> packages/nextjs-app/.env.template。\n\n将 .env.template 复制为 .env 文件：\n\n\n\n默认情况下，代码中的运行模式为 \"多应用\"，你可以在 .env 中进行修改：\n\n\n1. 选定存储方式#\n\n默认情况下，我们使用文件系统进行应用配置存储。你可以在 services/app/index.ts 中看到具体使用的存储方式：\n\n\n\n在 services/app 目录下，实现了两种应用配置的存储形式：\n\n * fs, 基于本地文件的存储，支持完整的 CRUD，但存在丢失数据的风险\n * restful, 通过 API 接口管理，支持完整的 CRUD，推荐使用🌟\n\n你可以根据你的需要自行选择，也可以修改代码或扩展其他实现形式，最终只要通过 services/app/index.ts 导出即可。","routePath":"/dify-chat-docs/v0.4.x/guide/app-config/config-single/modify-code","lang":"","toc":[{"text":"React SPA","id":"react-spa","depth":2,"charIndex":72},{"text":"0. 选定运行模式","id":"0-选定运行模式","depth":3,"charIndex":189},{"text":"1. 自定义应用配置管理","id":"1-自定义应用配置管理","depth":3,"charIndex":352},{"text":"1.1 自定义 Restful 实现","id":"11-自定义-restful-实现","depth":4,"charIndex":791},{"text":"1.2 展示固定的应用列表数据","id":"12-展示固定的应用列表数据","depth":4,"charIndex":1030},{"text":"Next.js","id":"nextjs","depth":2,"charIndex":1111},{"text":"0. 选定运行模式","id":"0-选定运行模式-1","depth":3,"charIndex":1122},{"text":"1. 选定存储方式","id":"1-选定存储方式","depth":3,"charIndex":1361}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":40,"title":"选择适合你的模式","content":"#\n\nDify Chat 提供两种应用模式来满足不同的使用场景：\n\n单应用模式：适合个人用户或小型团队，专注于单一 AI 应用的深度使用。你可以配置一个聊天机器人、知识问答助手或创意写作工具，享受专注的 AI 交互体验。\n\n多应用模式：专为企业级用户设计，支持同时管理多个 Dify\n应用。无论是客服系统、内容创作、数据分析还是代码助手，你都可以在一个界面中无缝切换，实现工作流程的统一管理。这种模式特别适合需要多 AI\n能力协同的企业场景，让团队成员能够根据具体需求选择合适的 AI 助手。","routePath":"/dify-chat-docs/v0.4.x/guide/app-config/config-single/select-mode","lang":"","toc":[],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":41,"title":"开始配置","content":"#\n\n访问项目界面，如果之前没有存量数据，在进入页面时将会提示应用配置不存在并弹出配置抽屉，你需要填写以下必填字段：\n\n * 请求配置：在 30 秒试用 中获取的 API Base 和 API Secret\n * 应用类型：默认是聊天助手，如果是其他类型应用，需要切换到对应的类型\n * 其他配置非必需，先保持默认值，后续需要再编辑即可\n\n\n\n填写信息后点击确定，将会展示应用运行界面：\n\n","routePath":"/dify-chat-docs/v0.4.x/guide/app-config/config-single/start","lang":"","toc":[],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":42,"title":"自定义用户信息","content":"#\n\nDify Chat 涉及到的用户信息，目前主要包含两个属性：\n\n * 在调用大部分 Dify API 时，需要传入 userId，用于标识用户身份。\n * 在应用列表界面，需要通过 enableSetting 参数，控制是否展示应用编辑相关的功能呢\n\n默认情况下，Dify Chat 会使用 FingerprintJS 生成一个唯一的用户 ID，并将其作为 userId\n参数传入。同时，enableSetting 参数默认为 true。\n\n如果你希望控制 userId 和 enableSetting 的生成逻辑，可以自定义登录逻辑：","routePath":"/dify-chat-docs/v0.4.x/guide/app-config/custom-user-info","lang":"","toc":[],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":43,"title":"部署 - 使用 Docker","content":"#\n\nTIP\n\n本章节内容及 Docker 容器化部署功能由社区贡献者 @@hitechbeijing 提供。\n\n\n容器运行#\n\n进入docker目录启动容器编排：\n\n\n\n浏览器访问http://127.0.0.1:8080/dify-chat/\n\n容器默认暴露http端口8080，https端口8443，可修改.env文件配置环境变量\n\n默认配置的docker镜像为多应用模式，如需自定义使用（如单应用模式）请自行构建docker镜像\n\n\n使用certbot全自动签发letsencrypt免费ssl证书#\n\n在操作之前请编辑.env文件修改以下几个参数：\n\n\n\n> 注意：请确保你配置的域名可以使用80端口访问到你的 dify-chat\n> 站点，详见：https://eff-certbot.readthedocs.io/en/latest/install.html#alternative-1-\n> docker\n\n在docker目录执行命令即可全自动申请、签发证书：\n\n\n\n签发的证书在[docker/certbot/conf/live/你的域名]目录下。\n\n注意：以上路径的证书文件为替身，如需将证书用在其他项目上需要在[docker/certbot/conf/archive/你的域名]目录下获取真实证书文件\n\n\n\n![注意：证书需要定期续期]","routePath":"/dify-chat-docs/v0.4.x/guide/development/deploy-docker","lang":"","toc":[{"text":"容器运行","id":"容器运行","depth":2,"charIndex":57},{"text":"使用certbot全自动签发letsencrypt免费ssl证书","id":"使用certbot全自动签发letsencrypt免费ssl证书","depth":2,"charIndex":221}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":44,"title":"部署 - 使用 PM2","content":"#\n\n本文将会介绍如何配置 Nginx，将 Dify Chat 部署到生产环境。\n\n\n生产构建#\n\n首先需要构建生产版本：\n\n\nNginx 配置#\n\n\n启动 Next.js 项目#\n\n如果你使用的是 Next.js 版本，推荐使用 PM2 启动项目。\n\n在 PM2 中配置：\n\n\n\n使用 PM2 启动项目：\n\n\n\n\nDocker 部署#","routePath":"/dify-chat-docs/v0.4.x/guide/development/deploy-pm2","lang":"","toc":[{"text":"生产构建","id":"生产构建","depth":2,"charIndex":42},{"text":"Nginx 配置","id":"nginx-配置","depth":2,"charIndex":63},{"text":"启动 Next.js 项目","id":"启动-nextjs-项目","depth":3,"charIndex":75},{"text":"Docker 部署","id":"docker-部署","depth":2,"charIndex":-1}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":45,"title":"本地开发与生产构建","content":"#\n\n安装依赖:\n\n\n\n启动开发服务器：\n\n构建生产版本：\n\n预览生产版本：","routePath":"/dify-chat-docs/v0.4.x/guide/development/","lang":"","toc":[],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":46,"title":"自适应主题","content":"#\n\n在页面右上角，可以看到一个电脑主题切换图标，它就是主题切换组件。\n\n默认情况下，主题模式为跟随系统自适应，在你的系统夜间模式生效后访问页面，页面会自动切换到暗黑主题。\n\n系统内置两个主题：\n\n * 亮色主题\n * 暗黑主题\n\n你可以选择切换以下主题模式：\n\n * 跟随系统，当系统切换到夜间模式时，页面也会自动切换到暗黑主题，否则会切换到亮色主题\n * 浅色，不论系统为何种模式，页面都会是亮色主题\n * 深色，不论系统为何种模式，页面都会是暗黑主题\n\n\n\n\n不同模式的页面样式示例#\n\n亮色模式：\n\n\n\n暗黑模式：\n\n","routePath":"/dify-chat-docs/v0.4.x/guide/features/auto-compatible-theme","lang":"","toc":[{"text":"不同模式的页面样式示例","id":"不同模式的页面样式示例","depth":2,"charIndex":232}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":47,"title":"对话输入参数","content":"#\n\nDify 应用支持配置初始参数，在对话开启时，展示在界面上供用户输入。\n\n默认情况下，同一个对话只允许输入一次参数值，在后续对话时，将会禁用输入控件。\n\n\n\n5.1 支持在对话开始后更新参数#\n\n在应用配置中，你可以选择是否允许用户在对话开始后更新参数值。\n\n在界面上编辑应用配置，将 \"对话参数配置\" 中的 \"更新历史参数\" 设为 \"启用\" 即可。\n\n\n\n\n读取 URL 作为应用参数#\n\n在实际应用场景下，我们可能有需要在 URL 中动态传入参数值，填入表单。\n\n\n\n为了支持此功能，你的 URL 需要定义成如下形式：\n\n\n\n应用示例 - 订单号填入#\n\n默认情况下，对话参数的值为空：\n\n\n\n我们可以在 URL 中拼接参数：\n\n\n\n说明：\n\n * appId, 应用 ID\n * encodedValue, 经过 Gzip 和 encodeUriComponent 处理后的参数值\n * isNewCvst, 指定需要开启新对话（如果不指定且存在历史对话时，默认将会选中最近一个对话）\n\nencodedValue 生成方式（NodeJS）：\n\n\n\n将 encodedValue 填入链接后访问，可以看到我们定义的 orderNo: 123456 已经被填入表单：\n\n","routePath":"/dify-chat-docs/v0.4.x/guide/features/conversation-input-params","lang":"","toc":[{"text":"5.1 支持在对话开始后更新参数","id":"51-支持在对话开始后更新参数","depth":4,"charIndex":81},{"text":"读取 URL 作为应用参数","id":"读取-url-作为应用参数","depth":3,"charIndex":182},{"text":"应用示例 - 订单号填入","id":"应用示例---订单号填入","depth":4,"charIndex":267}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":48,"title":"内容渲染","content":"#\n\nDify Chat 支持对 AI 回复的各种内容进行渲染，包括图片、视频、代码、图表，以及 Dify 自身返回的各种特殊格式。\n\n\n深度思考标签#\n\n目前流行的深度思考标签主要有两种：\n\n * <think>\n * <details>\n\n以上两种标签在 Dify Chat 中都被很好地支持，展示效果如下：\n\n\n\n\nChatflow / Workflow 工作流日志#\n\n在 Dify 的 Chatflow/Workflow 类型应用运行时，Dify API 会返回工作流日志，展示形式如下：\n\n\n\n\nAgent 调用工具#\n\n在 Dify 的 Agent 类型应用运行时，如果有调用到工具，Dify API 会返回工具的调用日志，展示形式如下：\n\n\n\n\n知识库引用链接#\n\n在 AI 回复过程中，如果引用到了知识库的内容，展示效果如下：\n\n\n\n当鼠标 hover 到引用链接上时，会展示具体的片段：\n\n\n\n\nEcharts 图表#\n\n支持渲染通过官方的图表插件生成的，或符合 Echarts 数据格式的代码块为图表：\n\n\n\n\nMermaid 图表#\n\nMermaid 是一种流行的文本绘图格式，展示效果如下：\n\n\n\n\n文件卡片#\n\n如果用户发送或者 AI 回复了文件，在对话中的展示效果如下：\n\n\n\n\n回复表单#\n\nDify 支持通过 jinja2 来配置回复表单供用户填写，本项目也支持了对应的功能。\n\nDify Chatflow 编排的回复内容示例：\n\n\n\n> 注意：\n> \n>  * 你需要自行在 Chatflow 中对 sys.query 进行正确的逻辑处理，区分普通消息、触发表单的消息及提交信息。\n>  * form 标签的 data-format 属性用于指定表单数据的格式，目前支持 json 和 text 两种格式。\n\n按照上面的内容回复后，默认情况下，在用户点击表单的提交按钮后，会将表单的值对象作为消息发送给同一个 Dify 应用，同时会在消息列表中展示。提交消息的示例文本：\n\n\n\n其中，isFormSubmit 字段用于标识这是一个表单提交的消息, 你可以在 Chatflow 编排的条件分支中使用它来进行判断消息类型。\n\n\n\n\n自定义提交消息文本#\n\n如果你不想展示具体的表单值 json 字符串，而是需要自定义发送的消息文本，可以按照下面的指引，在应用配置中进行配置（此配置只影响界面展示，实际提交到 Dify\nChatflow 开始节点的仍然是用户填写的表单值 json 字符串）。\n\n多应用模式\n\n在添加/更新应用配置弹窗中填写字段：\n\n * 表单回复 - 设置为 \"启用\"\n * 提交消息文本 - 用于替换表单值对象的文本，如 \"我提交了一个表单\"\n\n\n\n按照如上配置后，效果如下：\n\n","routePath":"/dify-chat-docs/v0.4.x/guide/features/markdown-render","lang":"","toc":[{"text":"深度思考标签","id":"深度思考标签","depth":2,"charIndex":68},{"text":"Chatflow / Workflow 工作流日志","id":"chatflow--workflow-工作流日志","depth":2,"charIndex":160},{"text":"Agent 调用工具","id":"agent-调用工具","depth":2,"charIndex":253},{"text":"知识库引用链接","id":"知识库引用链接","depth":2,"charIndex":330},{"text":"Echarts 图表","id":"echarts-图表","depth":2,"charIndex":407},{"text":"Mermaid 图表","id":"mermaid-图表","depth":2,"charIndex":466},{"text":"文件卡片","id":"文件卡片","depth":2,"charIndex":512},{"text":"回复表单","id":"回复表单","depth":2,"charIndex":554},{"text":"自定义提交消息文本","id":"自定义提交消息文本","depth":3,"charIndex":931}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":49,"title":"开场白","content":"#\n\nDify 应用支持配置开场白。\n\n默认情况下，开场白在每个新对话开始前展示，当用户发送消息（即对话开始）后，开场白将被隐藏。\n\n如果你希望在对话开始后展示开场白，可以在应用配置中进行配置：\n\n在界面上编辑应用配置，将 \"对话配置\" 中的 \"开场白展示场景\" 设为 \"总是展示\" 即可。\n\n","routePath":"/dify-chat-docs/v0.4.x/guide/features/opening-statement","lang":"","toc":[],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":50,"title":"从 v0.3.0 迁移","content":"#\n\n在本小节，我们将介绍如何从 v0.3.0 升级。\n\n如果你是老版本的 React APP 用户，请根据你的具体情况，进行正确的操作：\n\n * 如果你没有对代码进行过任何修改，请直接拉取 v0.4.0 Tag 后重新构建部署即可，本次升级对你来说将是无感的\n * 如果你修改过代码并且想要使用当前版本新增的功能，那么请遵循下面的步骤进行升级\n\nWARNING\n\n在 v0.4.0 版本中，我们完全弃用了 DifyChatProvider 和 useDifyChat, 这简化了组件嵌套关系。\n\n原来的 DifyChatProvider 承载的配置初始化功能，现在被分拆为几个部分。\n\n\n1. 初始化运行模式#\n\n在 packages/react-app/src/App.tsx 中，初始化运行模式：\n\n\n\n\n2. 初始化应用配置管理服务#\n\n现在的应用配置管理服务将会在需要使用时自动引入，依据不同的运行模式，入口分别如下：\n\n * 单应用模式：/packages/react-app/src/services/app/singleApp/index.ts\n * 多应用模式：/packages/react-app/src/services/app/multiApp/index.ts\n\n你要做的是，在上面的入口文件中，导出你所使用的 appService 即可。\n\n以多应用模式为例：\n\n\n\n\n3. 初始化 userId 和 enableSetting#\n\n在 v0.4.0 中，新增了一个真正意义上的授权登录页面，你可以查看 自定义用户信息 文档, 自定义你的用户信息获取和更新逻辑。","routePath":"/dify-chat-docs/v0.4.x/guide/migrate/from_v0.3.0","lang":"","toc":[{"text":"1. 初始化运行模式","id":"1-初始化运行模式","depth":2,"charIndex":294},{"text":"2. 初始化应用配置管理服务","id":"2-初始化应用配置管理服务","depth":2,"charIndex":355},{"text":"3. 初始化 `userId` 和 `enableSetting`","id":"3-初始化-userid-和-enablesetting","depth":2,"charIndex":-1}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":51,"title":"介绍","content":"#\n\nDify Chat，一个基于 Dify API 的 AI Web 应用，支持单应用、多应用等多种模式，提供开箱即用的应用配置管理功能。支持运行不同类型的\nDify 应用，适配深度思考、思维链、图表等多种形式输出。\n\n如果你觉得这个项目还不错的话，请动动你的小手指点个 Star ⭐️ 吧～\n\n\n\n\n为什么选择 Dify Chat#\n\nDify Chat 围绕以下几个关键特性进行设计：\n\n * 低成本：仅需 30 秒填写应用信息，即可开始使用\n * 多场景：提供单应用、多应用模式，致力于满足不同场景下的深度应用\n * 可扩展：源码全开放，你可以 Fork 原仓库后进行二开，扩展任意功能\n * 多种实现：提供 React SPA 和 Next.js 两种技术栈实现，满足不同开发者的喜好\n * 主题定制：兼容 TailwindCSS + Ant Design 设计系统，自由修改主题色\n * 响应式设计：支持 PC、移动端访问，多端功能同步\n * 丰富的内容支持：支持渲染图片、视频、代码、图表等丰富的交互性内容，让 AI 自由发挥\n\n\n低成本#\n\n只需从 Dify 获取应用 API Key，即可在 Dify Chat 快速配置一个应用并开始使用。\n\n\n多场景#\n\nDify Chat 提供两种应用模式来满足不同的使用场景：\n\n单应用模式：适合个人用户或小型团队，专注于单一 AI 应用的深度使用。你可以配置一个聊天机器人、知识问答助手或创意写作工具，享受专注的 AI 交互体验。\n\n多应用模式：专为企业级用户设计，支持同时管理多个 Dify\n应用。无论是客服系统、内容创作、数据分析还是代码助手，你都可以在一个界面中无缝切换，实现工作流程的统一管理。这种模式特别适合需要多 AI\n能力协同的企业场景，让团队成员能够根据具体需求选择合适的 AI 助手。\n\n\n可扩展#\n\nDify Chat 采用 MIT 开源协议，所有源代码完全开放。你可以：\n\n * Fork 仓库：在 GitHub 上 Fork 原仓库，获得完整的项目代码\n * 自由修改：根据业务需求修改界面、添加新功能或优化现有逻辑\n * 二次开发：基于现有架构进行深度定制，打造专属的 AI 应用平台\n * 贡献代码：将改进的功能通过 Pull Request 回馈社区，帮助项目持续完善\n\n无论是简单的主题定制，还是复杂的业务逻辑扩展，Dify Chat 的模块化设计都能让你轻松上手，快速实现个性化需求。\n\n\n多种实现#\n\nDify Chat 提供了两种主流的技术栈实现，让开发者可以根据项目需求和个人喜好选择最适合的方案：\n\n特性       REACT SPA 版本                          NEXT.JS 版本\n构建体积     轻量快速，构建体积小                            相对较大，包含服务端功能\n开发体验     开发体验更好，性能要求较低                         开发体验优秀，支持热重载\n部署方式     简单部署，可轻松部署到任何静态托管服务（如 GitHub Pages）   需要支持 Node.js 的托管服务\n功能扩展     功能扩展简单，学习成本低                          功能扩展强大，支持全栈开发\n首屏加载     客户端渲染，首屏加载相对较慢                        服务端渲染，首屏加载速度快\nSEO 表现   SEO 表现一般                              SEO 表现优秀\n安全性      前端暴露，存在密钥泄露风险                         内置 Server Actions，可规避密钥泄露风险\n适用场景     个人项目、快速原型、静态展示                        生产环境、企业级应用、需要 SEO 的场景\n\n无论你选择哪种反感，Dify Chat 都提供了完整的文档和示例代码，确保你能够快速上手并成功部署。如果你更注重简单性和快速部署，推荐使用 React SPA\n版本；如果你想用于生产环境，又不想依赖额外的后端服务，Next.js 版本将是更好的选择。\n\n\n主题定制#\n\nDify Chat 基于 TailwindCSS 和 Ant Design 构建，提供了灵活的主题定制能力，让你可以根据品牌需求或个人喜好轻松调整界面风格。\n\n\n响应式设计#\n\nDify Chat 采用响应式设计理念，确保在不同设备上都能提供一致且优秀的用户体验。\n\n\n丰富的内容支持#\n\nDify Chat 支持多种内容类型的渲染，让 AI 的回复更加生动和实用：\n\n图片和视频渲染：支持渲染图片和视频内容，在进行内容表达时，丰富多彩的图片和动态视频往往比文字更加深入人心，特别适合教程、演示等场景。\n\n代码高亮：内置代码语法高亮功能，支持多种编程语言，让代码展示更加清晰易读，提升开发者的使用体验。\n\n图表可视化：支持各种类型的图表渲染，如 Mermaid、Echarts 等，帮助用户更好地理解和分析数据。\n\n交互式元素：支持表单等交互组件，让用户可以直接在对话界面中执行操作，提升交互效率。\n\n丰富的内容支持让你可以在 Dify 应用中进行任意编排，以最适合的方式表达信息，无论是技术文档、数据分析报告，还是创意内容创作，都能得到最佳的展示效果。","routePath":"/dify-chat-docs/v0.4.x/guide/start/introduction","lang":"","toc":[{"text":"为什么选择 Dify Chat","id":"为什么选择-dify-chat","depth":2,"charIndex":151},{"text":"低成本","id":"低成本","depth":3,"charIndex":472},{"text":"多场景","id":"多场景","depth":3,"charIndex":531},{"text":"可扩展","id":"可扩展","depth":3,"charIndex":783},{"text":"多种实现","id":"多种实现","depth":3,"charIndex":1041},{"text":"主题定制","id":"主题定制","depth":3,"charIndex":1795},{"text":"响应式设计","id":"响应式设计","depth":3,"charIndex":1883},{"text":"丰富的内容支持","id":"丰富的内容支持","depth":3,"charIndex":1937}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":52,"title":"更进一步","content":"#\n\n在上一节 30 秒试用 中，我们对多应用模式的 React SPA 版本进行了试用，并了解了基本功能，接下来，我们将循序渐进地介绍 Dify\nChat，让它真正为你所用。\n\n在此之前，你需要先做两个选择：\n\n * 运行模式\n * 技术实现\n\n\n选择运行模式#\n\nDify Chat 提供两种应用模式来满足不同的使用场景：\n\n单应用模式：适合个人用户或小型团队，专注于单一 AI 应用的深度使用。你可以配置一个聊天机器人、知识问答助手或创意写作工具，享受专注的 AI 交互体验。\n\n多应用模式：专为企业级用户设计，支持同时管理多个 Dify\n应用。无论是客服系统、内容创作、数据分析还是代码助手，你都可以在一个界面中无缝切换，实现工作流程的统一管理。这种模式特别适合需要多 AI\n能力协同的企业场景，让团队成员能够根据具体需求选择合适的 AI 助手。\n\n\n选择技术实现#\n\n我们提供了 React SPA 和 Next.js 版本供你选择，你可以前往 介绍界面 查看两种技术实现的对比，选择适合你的版本。\n\n\n下一步#\n\n由于多应用和单应用的配置方式存在众多差异，接下来我们将对两种模式的配置进行分别阐述，你可以点击以下链接查看：\n\n * 配置 - 多应用模式\n * 配置 - 单应用模式","routePath":"/dify-chat-docs/v0.4.x/guide/start/start","lang":"","toc":[{"text":"选择运行模式","id":"选择运行模式","depth":2,"charIndex":124},{"text":"选择技术实现","id":"选择技术实现","depth":2,"charIndex":379},{"text":"下一步","id":"下一步","depth":2,"charIndex":456}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":53,"title":"30 秒试用","content":"#\n\n为方便演示，我们在 Github Pages 上部署了一个多应用模式的 React SPA 版本，你可以访问\nhttps://lexmin0412.github.io/dify-chat/ 体验。\n\n点击以上链接，你会看到应用列表的初始界面：\n\n\n\n\n准备#\n\n首先，你需要在 Dify 控制台获取几个关键变量：\n\n变量         说明\nAPI Base   Dify API 请求前缀, 如果你使用的是 Dify 官方提供的云服务，则为\n           https://api.dify.ai/v1\nApi Key    Dify API 密钥，用于访问对应应用的 API, Dify 应用和 API 密钥是一对多的关系\n\n进入 Dify 的应用详情，点击左侧的 访问 API：\n\n\n\nAPI 服务器 后展示的域名即为 API Base 变量的值。\n\n点击右侧的 API 密钥 按钮，即可看到 API Key 的管理弹窗：\n\n\n\n你可以选择创建一个新的 API Key，或者复制现有的 API Key。\n\n\n\n完成以上步骤后，我们将会得到如下信息：\n\n * API Base: https://api.dify.ai/v1 OR ${SELF_HOSTED_API_DOMAIN}/v1\n * API Key: app-YOUR_API_KEY\n\n\n添加应用配置#\n\n点击页面底部的 \"添加应用配置\" 按钮：\n\n\n\n依次填入应用信息：\n\n * 请求配置：在上一步中获取的 API Base 和 API Secret\n * 应用类型：默认是聊天助手，如果是其他类型应用，需要切换到对应的类型\n * 其他配置非必需，先保持默认值，后续需要再编辑即可\n\n\n\n点击确定按钮，提示 “添加配置成功”，在应用列表中会多出一条数据：\n\n\n\n此时你可以点击应用卡片右上角的 \"更多\" 图标，对应用进行编辑和删除操作：\n\n\n\n点击应用卡片，即可进入应用详情页开始对话了～\n\n","routePath":"/dify-chat-docs/v0.4.x/guide/start/trial","lang":"","toc":[{"text":"准备","id":"准备","depth":2,"charIndex":128},{"text":"添加应用配置","id":"添加应用配置","depth":2,"charIndex":584}],"domain":"","frontmatter":{},"version":"v0.4.x"},{"id":54,"title":"Hello world!","content":"#\n\n\nStart#\n\nWrite something to build your own docs! 🎁","routePath":"/dify-chat-docs/v0.4.x/hello","lang":"","toc":[{"text":"Start","id":"start","depth":2,"charIndex":3}],"domain":"","frontmatter":{},"version":"v0.4.x"}]