[{"id":0,"title":"FAQ","content":"#\n\nQ: pnpm install 报错 Cannot find matching keyid: ${JSON.stringify({ signatures,\nkeys })}\n\nA: 先运行 COREPACK_INTEGRITY_KEYS=0 corepack prepare 再执行 pnpm install。","routePath":"/dify-chat-docs/faq","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":1,"title":"自定义应用配置管理","content":"#\n\n为方便演示, 在 React SPA 版本中，我们默认使用 LocalStorage 进行应用配置管理，而在 Next.js 版本中，我们默认使用的是本地\nJSON 文件。\n\n如果你想自定义应用配置管理服务，请阅读以下内容。\n\n\n确定运行模式#\n\n在开始配置之前，确保你的运行模式是多应用模式。\n\n\n自定义应用配置管理#\n\n\nReact SPA 版本#\n\n配置入口#\n\n\n\n内置实现#\n\n1. LocalStorage\n\n使用 LocalStorage 数据进行存储，当用户切换浏览器后，数据会丢失，仅作为演示用。\n\n2. 静态数据\n\n使用静态数据进行存储，仅支持查询，不支持修改数据，适用于用户无需自定义应用的场景。\n\n定义用户可访问的应用列表：\n\n\n\n3. Restful API\n\n通过接口获取和修改数据，推荐使用🌟\n\n默认请求的后端服务地址为 http://localhost:5300，你可以根据你的需要修改。\n\n启动后端服务：\n\n\n\n自定义后端服务#\n\n如果内置的 Restful 实现无法满足你的需求，你可以自定义你的后端服务，请遵循以下步骤进行操作。\n\n首先，修改后端服务地址为你的自定义地址。\n\n\n\n然后，实现以下接口：\n\n接口名称          请求方法     接口路径        请求参数           返回参数\n获取 App 配置列表   GET      /apps       无              IDifyAppItem[]\n获取 App 配置详情   GET      /apps/:id   无              IDifyAppItem\n添加 App 配置     POST     /apps       IDifyAppItem   无\n更新 App 配置     PUT      /apps/:id   IDifyAppItem   无\n删除 App 配置     DELETE   /apps/:id   无              无\n\n\nNext.js 版本#\n\n配置入口#\n\n\n\n内置实现#\n\n1. 本地文件存储\n\n使用本地文件进行存储，支持完整的 CRUD，但存在丢失数据的风险。\n\n配置示例：\n\n\n\n2. Restful API\n\n通过 API 接口管理，支持完整的 CRUD，推荐使用🌟\n\n默认请求的后端服务地址为 http://localhost:5300，你可以根据你的需要修改。\n\n启动后端服务：\n\n\n\n自定义后端服务#\n\n如果内置的 Restful 实现无法满足你的需求，你可以自定义你的后端服务，请遵循以下步骤进行操作。\n\n首先，修改后端服务地址为你的自定义地址。\n\n\n\n然后，实现以下接口：\n\n接口名称          请求方法     接口路径        请求参数           返回参数\n获取 App 配置列表   GET      /apps       无              IDifyAppItem[]\n获取 App 配置详情   GET      /apps/:id   无              IDifyAppItem\n添加 App 配置     POST     /apps       IDifyAppItem   无\n更新 App 配置     PUT      /apps/:id   IDifyAppItem   无\n删除 App 配置     DELETE   /apps/:id   无              无","routePath":"/dify-chat-docs/guide/app-config/config-multiple/custom-app-service","lang":"","toc":[{"text":"确定运行模式","id":"确定运行模式","depth":2,"charIndex":117},{"text":"自定义应用配置管理","id":"自定义应用配置管理-1","depth":2,"charIndex":-1},{"text":"React SPA 版本","id":"react-spa-版本","depth":3,"charIndex":165},{"text":"配置入口","id":"配置入口","depth":4,"charIndex":180},{"text":"内置实现","id":"内置实现","depth":4,"charIndex":189},{"text":"自定义后端服务","id":"自定义后端服务","depth":4,"charIndex":426},{"text":"Next.js 版本","id":"nextjs-版本","depth":3,"charIndex":865},{"text":"配置入口","id":"配置入口-1","depth":4,"charIndex":878},{"text":"内置实现","id":"内置实现-1","depth":4,"charIndex":887},{"text":"自定义后端服务","id":"自定义后端服务-1","depth":4,"charIndex":1056}],"domain":"","frontmatter":{},"version":"Latest"},{"id":2,"title":"按需修改代码","content":"#\n\n我们提供了 React SPA 和 Next.js 两种技术实现，下面的内容将会分两种技术栈进行讲解，你可以按照你的喜好进行选择阅读。\n\n\nReact SPA#\n\n> 注意：为行文简洁，本小节下所有的路径表示省略 packages/react-app 前缀, 如 src/App.tsx, 实际路径为\n> packages/react-app/src/App.tsx。\n\n\n0. 选定运行模式#\n\n在上一节 选择适合你的模式 中，我们已经选定了应用模式。\n\n默认情况下，代码中的运行模式为 \"多应用\"，你可以在 src/App.tsx 中，看到初始化全局运行时配置的代码：\n\n\n\n如果你想要以单应用模式运行，需要对 difyChatRuntimeConfig.init() 的参数进行修改：\n\n\n\n\n1. 自定义应用配置管理#\n\n默认情况下，为方便演示，我们使用 LocalStorage 进行应用配置的存储。你可以在 src/services/app 中看到：\n\n多应用模式：\n\n\n\n单应用模式：\n\n\n\n在 src/services/app 在，分别有 multiApp 和 singleApp 两个目录，其下又分别有三种应用配置存储的实现形式：\n\n * static-readonly, 写死在代码中的数据，只支持查询，不支持修改数据\n * localstorage, 使用 LocalStorage 存储，支持完整的 CRUD，但无法跨浏览器同步\n * restful, 通过 API 接口存储，支持完整的 CRUD，推荐使用🌟\n\n你可以根据你的需要自行选择，也可以修改代码或扩展其他实现形式，最终只要通过 src/services/app/multiApp/index.ts 或者\nsrc/services/app/singleApp/index.ts 导出即可。\n\n1.1 自定义 Restful 实现#\n\n如果需要自定义你的后端服务，请遵循以下步骤进行操作。\n\n首先，参考 packages/server，实现以下接口：\n\n * 获取 App 配置列表\n * 获取 App 配置详情\n * 添加 App 配置\n * 更新 App 配置\n * 删除 App 配置\n\n然后在 src/services/app/multiApp 中新建一个文件，只需要继承抽象类 DifyAppStore 并实现它的所有方法,\n调用在上述服务中对应的接口即可。\n\n1.2 展示固定的应用列表数据#\n\n修改 src/services/app/multiApp/static-readonly/data.ts 中的数据。\n\n\n\n\nNext.js#\n\n\n0. 选定运行模式#\n\n在上一节 选择适合你的模式 中，你应该已经按需选好了应用模式，接下来让我们开始配置。\n\n> 注意：为行文简洁，本小节下所有的路径表示省略 packages/nextjs-app 前缀, 如 .env.template, 实际路径为\n> packages/nextjs-app/.env.template。\n\n将 .env.template 复制为 .env 文件：\n\n\n\n默认情况下，代码中的运行模式为 \"多应用\"，你可以在 .env 中进行修改：\n\n\n1. 选定存储方式#\n\n默认情况下，我们使用文件系统进行应用配置存储。你可以在 services/app/index.ts 中看到具体使用的存储方式：\n\n\n\n在 services/app 目录下，实现了两种应用配置的存储形式：\n\n * fs, 基于本地文件的存储，支持完整的 CRUD，但存在丢失数据的风险\n * restful, 通过 API 接口管理，支持完整的 CRUD，推荐使用🌟\n\n你可以根据你的需要自行选择，也可以修改代码或扩展其他实现形式，最终只要通过 services/app/index.ts 导出即可。","routePath":"/dify-chat-docs/guide/app-config/config-multiple/modify-code","lang":"","toc":[{"text":"React SPA","id":"react-spa","depth":2,"charIndex":72},{"text":"0. 选定运行模式","id":"0-选定运行模式","depth":3,"charIndex":189},{"text":"1. 自定义应用配置管理","id":"1-自定义应用配置管理","depth":3,"charIndex":352},{"text":"1.1 自定义 Restful 实现","id":"11-自定义-restful-实现","depth":4,"charIndex":791},{"text":"1.2 展示固定的应用列表数据","id":"12-展示固定的应用列表数据","depth":4,"charIndex":1030},{"text":"Next.js","id":"nextjs","depth":2,"charIndex":1111},{"text":"0. 选定运行模式","id":"0-选定运行模式-1","depth":3,"charIndex":1122},{"text":"1. 选定存储方式","id":"1-选定存储方式","depth":3,"charIndex":1361}],"domain":"","frontmatter":{},"version":"Latest"},{"id":3,"title":"开始配置","content":"#\n\n访问项目界面，如果之前没有存量数据，第一次进入页面时会展示缺省状态，你需要点击页面底部的 \"添加应用配置\" 按钮：\n\n\n\n此时会弹出添加应用配置的表单抽屉：\n\n\n\n依次填入应用信息：\n\n * 请求配置：在 30 秒试用 中获取的 API Base 和 API Secret\n * 应用类型：默认是聊天助手，如果是其他类型应用，需要切换到对应的类型\n * 其他配置非必需，先保持默认值，后续需要再编辑即可\n\n\n\n点击确定按钮，提示 “添加配置成功”，在应用列表中会多出一条数据：\n\n\n\n此时你可以点击应用卡片右上角的 \"更多\" 图标，对应用进行编辑和删除操作：\n\n\n\n点击应用卡片，即可进入应用详情页开始对话：\n\n","routePath":"/dify-chat-docs/guide/app-config/config-multiple/start","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":4,"title":"自定义应用配置","content":"#\n\n\n确定运行模式#\n\n在开始配置之前，确保你的运行模式是单应用模式。\n\n\n自定义应用配置#\n\nDify Chat 已经内置了多种应用配置管理方式，满足不同场景需求，你可以根据你的需求选择合适的方式。\n\n\nReact SPA 版本#\n\n配置入口#\n\n\n\n内置实现#\n\n1. LocalStorage\n\n使用 LocalStorage 存储和修改数据，当用户切换浏览器后，数据会丢失，仅作为演示用。\n\n2. 静态数据\n\n使用静态数据进行存储，仅支持查询，适用于用户无需自定义应用的场景。\n\n定义配置：\n\n\n\n3. Restful API\n\n通过接口获取和修改数据，推荐使用🌟\n\n默认请求的后端服务地址为 http://localhost:5300，你可以根据你的需要修改。\n\n如果你的后端服务地址与默认地址不一致，只需在对应的 restful 实现中，修改调用的 BaseURL 即可。\n\n\n\n你需要自行实现以下接口以完成应用配置的读取和保存：\n\n接口名称          请求方法   接口路径   请求参数           返回参数\n获取 App 配置详情   GET    /app   无              IDifyAppItem\n保存 App 配置     POST   /app   IDifyAppItem   无\n\n\nNext.js 版本#\n\n配置入口#\n\n\n\n内置实现#\n\n1. 本地文件存储\n\n使用本地文件进行存储，支持读取和修改，但存在丢失数据的风险。\n\n配置示例：\n\n\n\n2. Restful API\n\n通过 API 接口管理，支持读取和修改，推荐使用🌟\n\n默认请求的后端服务地址为 http://localhost:5300，你可以根据你的需要修改。\n\n如果你的后端服务地址与默认地址不一致，只需在对应的 restful 实现中，修改调用的 BaseURL 即可。\n\n\n\n你需要自行实现以下接口以完成应用配置的读取和保存：\n\n接口名称          请求方法   接口路径   请求参数           返回参数\n获取 App 配置详情   GET    /app   无              IDifyAppItem\n保存 App 配置     POST   /app   IDifyAppItem   无","routePath":"/dify-chat-docs/guide/app-config/config-single/custom-app-config","lang":"","toc":[{"text":"确定运行模式","id":"确定运行模式","depth":2,"charIndex":3},{"text":"自定义应用配置","id":"自定义应用配置-1","depth":2,"charIndex":-1},{"text":"React SPA 版本","id":"react-spa-版本","depth":3,"charIndex":103},{"text":"配置入口","id":"配置入口","depth":4,"charIndex":118},{"text":"内置实现","id":"内置实现","depth":4,"charIndex":127},{"text":"Next.js 版本","id":"nextjs-版本","depth":3,"charIndex":575},{"text":"配置入口","id":"配置入口-1","depth":4,"charIndex":588},{"text":"内置实现","id":"内置实现-1","depth":4,"charIndex":597}],"domain":"","frontmatter":{},"version":"Latest"},{"id":5,"title":"按需修改代码","content":"#\n\n我们提供了 React SPA 和 Next.js 两种技术实现，下面的内容将会分两种技术栈进行讲解，你可以按照你的喜好进行选择阅读。\n\n\nReact SPA#\n\n> 注意：为行文简洁，本小节下所有的路径表示省略 packages/react-app 前缀, 如 src/App.tsx, 实际路径为\n> packages/react-app/src/App.tsx。\n\n\n0. 选定运行模式#\n\n在上一节 选择适合你的模式 中，我们已经选定了应用模式。\n\n默认情况下，代码中的运行模式为 \"多应用\"，你可以在 src/App.tsx 中，看到初始化全局运行时配置的代码：\n\n\n\n如果你想要以单应用模式运行，需要对 difyChatRuntimeConfig.init() 的参数进行修改：\n\n\n\n\n1. 自定义应用配置管理#\n\n默认情况下，为方便演示，我们使用 LocalStorage 进行应用配置的存储。你可以在 src/services/app 中看到：\n\n多应用模式：\n\n\n\n单应用模式：\n\n\n\n在 src/services/app 在，分别有 multiApp 和 singleApp 两个目录，其下又分别有三种应用配置存储的实现形式：\n\n * static-readonly, 写死在代码中的数据，只支持查询，不支持修改数据\n * localstorage, 使用 LocalStorage 存储，支持完整的 CRUD，但无法跨浏览器同步\n * restful, 通过 API 接口存储，支持完整的 CRUD，推荐使用🌟\n\n你可以根据你的需要自行选择，也可以修改代码或扩展其他实现形式，最终只要通过 src/services/app/multiApp/index.ts 或者\nsrc/services/app/singleApp/index.ts 导出即可。\n\n1.1 自定义 Restful 实现#\n\n如果需要自定义你的后端服务，请遵循以下步骤进行操作。\n\n首先，参考 packages/server，实现以下接口：\n\n * 获取 App 配置列表\n * 获取 App 配置详情\n * 添加 App 配置\n * 更新 App 配置\n * 删除 App 配置\n\n然后在 src/services/app/multiApp 中新建一个文件，只需要继承抽象类 DifyAppStore 并实现它的所有方法,\n调用在上述服务中对应的接口即可。\n\n1.2 展示固定的应用列表数据#\n\n修改 src/services/app/multiApp/static-readonly/data.ts 中的数据。\n\n\n\n\nNext.js#\n\n\n0. 选定运行模式#\n\n在上一节 选择适合你的模式 中，你应该已经按需选好了应用模式，接下来让我们开始配置。\n\n> 注意：为行文简洁，本小节下所有的路径表示省略 packages/nextjs-app 前缀, 如 .env.template, 实际路径为\n> packages/nextjs-app/.env.template。\n\n将 .env.template 复制为 .env 文件：\n\n\n\n默认情况下，代码中的运行模式为 \"多应用\"，你可以在 .env 中进行修改：\n\n\n1. 选定存储方式#\n\n默认情况下，我们使用文件系统进行应用配置存储。你可以在 services/app/index.ts 中看到具体使用的存储方式：\n\n\n\n在 services/app 目录下，实现了两种应用配置的存储形式：\n\n * fs, 基于本地文件的存储，支持完整的 CRUD，但存在丢失数据的风险\n * restful, 通过 API 接口管理，支持完整的 CRUD，推荐使用🌟\n\n你可以根据你的需要自行选择，也可以修改代码或扩展其他实现形式，最终只要通过 services/app/index.ts 导出即可。","routePath":"/dify-chat-docs/guide/app-config/config-single/modify-code","lang":"","toc":[{"text":"React SPA","id":"react-spa","depth":2,"charIndex":72},{"text":"0. 选定运行模式","id":"0-选定运行模式","depth":3,"charIndex":189},{"text":"1. 自定义应用配置管理","id":"1-自定义应用配置管理","depth":3,"charIndex":352},{"text":"1.1 自定义 Restful 实现","id":"11-自定义-restful-实现","depth":4,"charIndex":791},{"text":"1.2 展示固定的应用列表数据","id":"12-展示固定的应用列表数据","depth":4,"charIndex":1030},{"text":"Next.js","id":"nextjs","depth":2,"charIndex":1111},{"text":"0. 选定运行模式","id":"0-选定运行模式-1","depth":3,"charIndex":1122},{"text":"1. 选定存储方式","id":"1-选定存储方式","depth":3,"charIndex":1361}],"domain":"","frontmatter":{},"version":"Latest"},{"id":6,"title":"选择适合你的模式","content":"#\n\nDify Chat 提供两种应用模式来满足不同的使用场景：\n\n单应用模式：适合个人用户或小型团队，专注于单一 AI 应用的深度使用。你可以配置一个聊天机器人、知识问答助手或创意写作工具，享受专注的 AI 交互体验。\n\n多应用模式：专为企业级用户设计，支持同时管理多个 Dify\n应用。无论是客服系统、内容创作、数据分析还是代码助手，你都可以在一个界面中无缝切换，实现工作流程的统一管理。这种模式特别适合需要多 AI\n能力协同的企业场景，让团队成员能够根据具体需求选择合适的 AI 助手。","routePath":"/dify-chat-docs/guide/app-config/config-single/select-mode","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":7,"title":"开始配置","content":"#\n\n访问项目界面，如果之前没有存量数据，在进入页面时将会提示应用配置不存在并弹出配置抽屉，你需要填写以下必填字段：\n\n * 请求配置：在 30 秒试用 中获取的 API Base 和 API Secret\n * 应用类型：默认是聊天助手，如果是其他类型应用，需要切换到对应的类型\n * 其他配置非必需，先保持默认值，后续需要再编辑即可\n\n\n\n填写信息后点击确定，将会展示应用运行界面：\n\n","routePath":"/dify-chat-docs/guide/app-config/config-single/start","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":8,"title":"自定义用户信息","content":"#\n\nDify Chat 涉及到的用户信息，目前其实只有一个：userId。\n\n在调用大部分 Dify API 时，需要传入 userId，用于标识用户身份。\n\n默认情况下，Dify Chat 会使用 FingerprintJS 生成一个唯一的用户 ID，并将其作为 userId 参数传入。\n\n如果你有自定义的需求，可以修改授权页面的 mockLogin 函数，自定义 userId 的生成逻辑：\n\n","routePath":"/dify-chat-docs/guide/app-config/custom-user-info","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":9,"title":"自定义数据库类型","content":"#\n\n默认情况下，Dify Chat 使用 MySQL 进行应用配置的持久化存储。\n\n\n1. 使用 MySQL#\n\n如果你有 MySQL 数据库，那么非常简单，只需要构建一个用于存放 Dify Chat 数据的数据库连接并配置在环境变量：\n\n\n\n\n2. 使用其他数据库#\n\n如果你的数据库是其他类型，则需要修改代码。下面以 PostgreSQL 为例说明如何配置。\n\n首先，修改 Prisma 配置文件中的数据库类型：\n\n\n\n然后在 .env 中配置你的数据库连接地址：\n\n\n\n重新生成 Prisma 客户端文件并同步表结构：\n\n\n\n最后，按照你喜欢的方式（Docker 或者脚本）启动即可。","routePath":"/dify-chat-docs/guide/deploy/db-config","lang":"","toc":[{"text":"1. 使用 MySQL","id":"1-使用-mysql","depth":3,"charIndex":43},{"text":"2. 使用其他数据库","id":"2-使用其他数据库","depth":3,"charIndex":123}],"domain":"","frontmatter":{},"version":"Latest"},{"id":10,"title":"Docker Compose 一键部署","content":"#\n\n使用 Docker Compose 时，我们提供了两种方式供你部署，你可以按需选用。\n\n\n直接部署#\n\n这种方式适用于无需二开的场景，你不需要 clone 源码，直接使用官方镜像部署即可。\n\n\n1. 准备工作目录#\n\n\n\n\n2. 下载配置文件#\n\n\n\n\n3. 修改配置#\n\n\n\n\n4. 启动容器#\n\n\n\n\n5. 访问应用#\n\n> serverip 是你的服务器 IP，如果是本机启动，直接使用 localhost 访问即可\n\n * React App: http://serverip:5200\n * Platform API: http://serverip:5300\n\n\n二开后自行构建镜像#\n\n如果需要对 Dify Chat 进行二开，你需要 clone 源码并自行构建镜像。\n\n\n1. Clone 代码仓库#\n\n\n\n\n2. 配置本地环境变量#\n\n复制 react-app 的环境变量配置文件：\n\n\n\n复制 platform 的环境变量配置文件：\n\n\n\n注意：默认情况下，Dify Chat 使用 MySQL 进行应用配置的持久化存储，如果你需要配置其他类型的数据库，请查看 使用其他数据库。\n\n\n3. 修改源码#\n\n修改代码并自测。\n\n\n4. 基于本地代码构建镜像并启动#\n\n对于二开场景，我们准备了一个专用的 docker compose 配置文件，你可以直接使用，它会读取对应子包下的 .env 文件作为环境变量启动容器。\n\n","routePath":"/dify-chat-docs/guide/deploy/docker-compose","lang":"","toc":[{"text":"直接部署","id":"直接部署","depth":2,"charIndex":47},{"text":"1. 准备工作目录","id":"1-准备工作目录","depth":3,"charIndex":99},{"text":"2. 下载配置文件","id":"2-下载配置文件","depth":3,"charIndex":114},{"text":"3. 修改配置","id":"3-修改配置","depth":3,"charIndex":129},{"text":"4. 启动容器","id":"4-启动容器","depth":3,"charIndex":142},{"text":"5. 访问应用","id":"5-访问应用","depth":3,"charIndex":155},{"text":"二开后自行构建镜像","id":"二开后自行构建镜像","depth":2,"charIndex":290},{"text":"1. Clone 代码仓库","id":"1-clone-代码仓库","depth":3,"charIndex":346},{"text":"2. 配置本地环境变量","id":"2-配置本地环境变量","depth":3,"charIndex":365},{"text":"3. 修改源码","id":"3-修改源码","depth":3,"charIndex":504},{"text":"4. 基于本地代码构建镜像并启动","id":"4-基于本地代码构建镜像并启动","depth":3,"charIndex":525}],"domain":"","frontmatter":{},"version":"Latest"},{"id":11,"title":"Shell 脚本一键启动","content":"#\n\n如果你没有 Docker 环境，也可以通过源码启动项目，本小节将会教你如何通过脚本一键完成 Dify Chat 的项目构建和启动。\n\n\n0. 部署环境#\n\n在开始部署前，你需要准备好以下环境：\n\n * Node.js >= 20\n * Pnpm >= 10.8.1\n\n\n1. Clone 项目源码#\n\n\n\n\n2. 配置环境变量#\n\n进入项目目录：\n\n\n\n配置 react-app 的环境变量：\n\n\n\n配置 platform 的环境变量：\n\n\n\n\n3. 运行启动脚本#\n\n\n\n脚本会帮你自动完成依赖安装，源码构建以及服务启动，稍等片刻后，看到如下图片则表示执行成功了：\n\n\n\n访问 http://localhost:5300，你会看到 Platform 的初始化界面，依次输入用户名、邮箱、密码，即可创建一个管理员账号。此账号可用于\nDify Chat Platform 的登录。\n\n对于前端应用，你需要将 packages/react-app/dist 中的产物通过 nginx 等静态文件服务器进行部署。\n\n\n4. 修改环境变量#\n\n如果你需要修改环境变量的值（如数据库连接地址），可以编辑第 2 步中创建的 .env 文件，然后重新运行 ./prod-start.sh 即可。","routePath":"/dify-chat-docs/guide/deploy/one-key-start","lang":"","toc":[{"text":"0. 部署环境","id":"0-部署环境","depth":2,"charIndex":70},{"text":"1. Clone 项目源码","id":"1-clone-项目源码","depth":2,"charIndex":137},{"text":"2. 配置环境变量","id":"2-配置环境变量","depth":2,"charIndex":156},{"text":"3. 运行启动脚本","id":"3-运行启动脚本","depth":2,"charIndex":225},{"text":"4. 修改环境变量","id":"4-修改环境变量","depth":2,"charIndex":458}],"domain":"","frontmatter":{},"version":"Latest"},{"id":12,"title":"部署 - 使用 Docker","content":"#\n\nTIP\n\n本章节内容及 Docker 容器化部署功能由社区贡献者 @@hitechbeijing 提供。\n\n\n容器运行#\n\n进入docker目录启动容器编排：\n\n\n\n浏览器访问http://127.0.0.1:8080/dify-chat/\n\n容器默认暴露http端口8080，https端口8443，可修改.env文件配置环境变量\n\n默认配置的docker镜像为多应用模式，如需自定义使用（如单应用模式）请自行构建docker镜像\n\n\n使用certbot全自动签发letsencrypt免费ssl证书#\n\n在操作之前请编辑.env文件修改以下几个参数：\n\n\n\n> 注意：请确保你配置的域名可以使用80端口访问到你的 dify-chat\n> 站点，详见：https://eff-certbot.readthedocs.io/en/latest/install.html#alternative-1-\n> docker\n\n在docker目录执行命令即可全自动申请、签发证书：\n\n\n\n签发的证书在[docker/certbot/conf/live/你的域名]目录下。\n\n注意：以上路径的证书文件为替身，如需将证书用在其他项目上需要在[docker/certbot/conf/archive/你的域名]目录下获取真实证书文件\n\n\n\n![注意：证书需要定期续期]","routePath":"/dify-chat-docs/guide/development/deploy-docker","lang":"","toc":[{"text":"容器运行","id":"容器运行","depth":2,"charIndex":57},{"text":"使用certbot全自动签发letsencrypt免费ssl证书","id":"使用certbot全自动签发letsencrypt免费ssl证书","depth":2,"charIndex":221}],"domain":"","frontmatter":{},"version":"Latest"},{"id":13,"title":"部署 - 使用 PM2","content":"#\n\n本文将会介绍如何配置 Nginx，将 Dify Chat 部署到生产环境。\n\n\n生产构建#\n\n首先需要构建生产版本：\n\n\nNginx 配置#\n\n\n启动 Next.js 项目#\n\n如果你使用的是 Next.js 版本，推荐使用 PM2 启动项目。\n\n在 PM2 中配置：\n\n\n\n使用 PM2 启动项目：\n\n\n\n\nDocker 部署#","routePath":"/dify-chat-docs/guide/development/deploy-pm2","lang":"","toc":[{"text":"生产构建","id":"生产构建","depth":2,"charIndex":42},{"text":"Nginx 配置","id":"nginx-配置","depth":2,"charIndex":63},{"text":"启动 Next.js 项目","id":"启动-nextjs-项目","depth":3,"charIndex":75},{"text":"Docker 部署","id":"docker-部署","depth":2,"charIndex":-1}],"domain":"","frontmatter":{},"version":"Latest"},{"id":14,"title":"本地开发与生产构建","content":"#\n\n安装依赖:\n\n\n\n启动开发服务器：\n\n构建生产版本：\n\n预览生产版本：","routePath":"/dify-chat-docs/guide/development/","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":15,"title":"自适应主题","content":"#\n\n在页面右上角，可以看到一个电脑主题切换图标，它就是主题切换组件。\n\n默认情况下，主题模式为跟随系统自适应，在你的系统夜间模式生效后访问页面，页面会自动切换到暗黑主题。\n\n系统内置两个主题：\n\n * 亮色主题\n * 暗黑主题\n\n你可以选择切换以下主题模式：\n\n * 跟随系统，当系统切换到夜间模式时，页面也会自动切换到暗黑主题，否则会切换到亮色主题\n * 浅色，不论系统为何种模式，页面都会是亮色主题\n * 深色，不论系统为何种模式，页面都会是暗黑主题\n\n\n\n\n不同模式的页面样式示例#\n\n亮色模式：\n\n\n\n暗黑模式：\n\n","routePath":"/dify-chat-docs/guide/features/auto-compatible-theme","lang":"","toc":[{"text":"不同模式的页面样式示例","id":"不同模式的页面样式示例","depth":2,"charIndex":232}],"domain":"","frontmatter":{},"version":"Latest"},{"id":16,"title":"对话输入参数","content":"#\n\nDify 应用支持配置初始参数，在对话开启时，展示在界面上供用户输入。\n\n默认情况下，同一个对话只允许输入一次参数值，在后续对话时，将会禁用输入控件。\n\n\n\n\n1. 支持在对话开始后更新参数#\n\n在应用配置中，你可以选择是否允许用户在对话开始后更新参数值。\n\n在界面上编辑应用配置，将 \"对话参数配置\" 中的 \"更新历史参数\" 设为 \"启用\" 即可。\n\n\n\n\n读取 URL 作为应用参数#\n\n在实际应用场景下，我们可能有需要在 URL 中动态传入参数值，填入表单。\n\n\n\n为了支持此功能，你的 URL 需要定义成如下形式：\n\n\n\n应用示例 - 订单号填入#\n\n默认情况下，对话参数的值为空：\n\n\n\n我们可以在 URL 中拼接参数：\n\n\n\n说明：\n\n * appId, 应用 ID\n * encodedValue, 经过 Gzip 和 encodeUriComponent 处理后的参数值\n * isNewCvst, 指定需要开启新对话（如果不指定且存在历史对话时，默认将会选中最近一个对话）\n\nencodedValue 生成方式（NodeJS）：\n\n\n\n将 encodedValue 填入链接后访问，可以看到我们定义的 orderNo: 123456 已经被填入表单：\n\n\n\n\n2. 全局参数缓存#\n\n有时候，对于一些固定的业务参数，我们可能需要在多个应用/对话中共享输出参数值，不需要用户重复输入，这时候可以使用全局参数缓存功能。\n\n要使用全局参数缓存非常简单，只需要在正常传递参数的同时，加上一个 &isKeepAll=true 即可。\n\n例如：\n\n\n\n参数说明：\n\n * isKeepAll, 指定是否需要缓存参数值, 在进入其他对话时复用\n   * true, 缓存参数值\n\n整个链接将会有如下效果：\n\n * 开启新对话（isNewCvst=1）\n * 缓存参数值（isKeepAll=true）\n   * 进入其他对话后，会自动将 orderNo 参数值填入表单","routePath":"/dify-chat-docs/guide/features/conversation-input-params","lang":"","toc":[{"text":"1. 支持在对话开始后更新参数","id":"1-支持在对话开始后更新参数","depth":2,"charIndex":82},{"text":"读取 URL 作为应用参数","id":"读取-url-作为应用参数","depth":3,"charIndex":182},{"text":"应用示例 - 订单号填入","id":"应用示例---订单号填入","depth":4,"charIndex":267},{"text":"2. 全局参数缓存","id":"2-全局参数缓存","depth":2,"charIndex":541}],"domain":"","frontmatter":{},"version":"Latest"},{"id":17,"title":"自定义 User ID","content":"#\n\n在调用大部分 Dify API 时，需要传入 userId，用于标识用户身份。\n\n默认情况下，Dify Chat 会使用 FingerprintJS 生成一个唯一的用户 ID，并将其作为 userId 参数传入。\n\n如果你希望控制 userId 的生成逻辑，可以修改 mockLogin 函数，自定义登录逻辑：\n\n","routePath":"/dify-chat-docs/guide/features/custom-user-id","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":18,"title":"调试模式","content":"#\n\n调试模式是 Dify Chat 提供的开发调试功能，允许开发者无需进行任何代码改动，也不需要依赖后端服务即可快速配置 API Key ，直连 Dify API\n调试应用功能。\n\n\n1. 功能概览#\n\n进入调试模式后，你会看到应用列表的初始界面, 页面右下角有一个调试按钮。\n\n\n\n点击页面右下角的 \"调试按钮\"，会打开一个抽屉，抽屉中包含了应用配置的编辑区域，你可以填入 Dify 的 API Base URL 和 API Key 。\n\n\n\n\n2. 使用场景#\n\n调试模式适用于以下场景：\n\n * 本地开发：在没有后端代理服务的情况下直连 Dify 进行前端开发\n * 功能测试：测试不同应用配置下的界面表现\n * 演示展示：使用模拟数据进行产品演示\n * 问题排查：隔离服务器问题，专注于前端逻辑调试\n\n\n3. 如何开启#\n\n要开始调试模式，有两种方案，你可以按需选择。\n\n\n3.1. 直接在 URL 中添加参数#\n\n这种方案适合一次性调试的场景，适合临时排查问题或调试应用功能，调试完成后可以直接退出，回到正常的访问模式。\n\n开启方式：在浏览器地址栏的 URL 中添加 isDebug=true 参数，例如：\n\n\n\n\n3.2. 指定环境变量#\n\n这种方案适合长期开启调试模式的场景，不支持退出。\n\n开启方式：在 packages/react-app/public/env.js 文件中，将调试模式的开关直接设置为 'true'（注意是字符串）, 然后运行\npnpm --filter dify-chat-app-react build 重新构建产物即可生效。\n\n\n\n如果你是基于 docker compose 构建的，更方便的方式是在 docker-compose.yml 中，将 react-app 服务的\nPUBLIC_DEBUG_MODE 变量值改为 true 之后重启容器。\n\n\n\n\n4. 使用说明#\n\n> 不论你通过那种方式开启调试模式，所有相关数据均保存在 LocalStorage 和 SessionStorage\n> 中，不会上传到任何第三方服务器，你可以放心使用。\n\n\n4.1. 操作步骤#\n\n 1. 点击页面左下角的调试按钮\n 2. 在配置编辑器中输入或修改 JSON 配置\n 3. 可以点击\"使用示例配置\"按钮快速填入模板\n 4. 点击\"保存配置\"按钮保存设置\n 5. 页面会自动刷新，应用列表将显示配置的调试应用\n\n\n4.2. 注意事项#\n\n * 调试模式仅在开发环境中使用，生产环境不应启用\n * 配置数据保存在浏览器本地，清除浏览器数据会丢失配置\n * 调试应用的 API 密钥需要是真实有效的，才能正常进行对话\n\n\n4.3. 清除配置#\n\n要清除调试配置，可以：\n\n 1. 在配置编辑器中点击退出调试按钮，或者清空内容后保存\n 2. 或者直接在浏览器开发者工具中删除 __DC__DEBUG_APPS 键值对","routePath":"/dify-chat-docs/guide/features/debug-mode","lang":"","toc":[{"text":"1. 功能概览","id":"1-功能概览","depth":2,"charIndex":92},{"text":"2. 使用场景","id":"2-使用场景","depth":2,"charIndex":224},{"text":"3. 如何开启","id":"3-如何开启","depth":2,"charIndex":356},{"text":"3.1. 直接在 URL 中添加参数","id":"31-直接在-url-中添加参数","depth":3,"charIndex":391},{"text":"3.2. 指定环境变量","id":"32-指定环境变量","depth":3,"charIndex":513},{"text":"4. 使用说明","id":"4-使用说明","depth":2,"charIndex":800},{"text":"4.1. 操作步骤","id":"41-操作步骤","depth":3,"charIndex":898},{"text":"4.2. 注意事项","id":"42-注意事项","depth":3,"charIndex":1025},{"text":"4.3. 清除配置","id":"43-清除配置","depth":3,"charIndex":1127}],"domain":"","frontmatter":{},"version":"Latest"},{"id":19,"title":"内容渲染","content":"#\n\nDify Chat 支持对 AI 回复的各种内容进行渲染，包括图片、视频、代码、图表，以及 Dify 自身返回的各种特殊格式。\n\n\n深度思考标签#\n\n目前流行的深度思考标签主要有两种：\n\n * <think>\n * <details>\n\n以上两种标签在 Dify Chat 中都被很好地支持，展示效果如下：\n\n\n\n\nChatflow / Workflow 工作流日志#\n\n在 Dify 的 Chatflow/Workflow 类型应用运行时，Dify API 会返回工作流日志，展示形式如下：\n\n\n\n\nAgent 调用工具#\n\n在 Dify 的 Agent 类型应用运行时，如果有调用到工具，Dify API 会返回工具的调用日志，展示形式如下：\n\n\n\n\n知识库引用链接#\n\n在 AI 回复过程中，如果引用到了知识库的内容，展示效果如下：\n\n\n\n当鼠标 hover 到引用链接上时，会展示具体的片段：\n\n\n\n\nEcharts 图表#\n\n支持渲染通过官方的图表插件生成的，或符合 Echarts 数据格式的代码块为图表：\n\n\n\n\nMermaid 图表#\n\nMermaid 是一种流行的文本绘图格式，展示效果如下：\n\n\n\n\n文件卡片#\n\n如果用户发送或者 AI 回复了文件，在对话中的展示效果如下：\n\n\n\n\n回复表单#\n\nDify 支持通过 jinja2 来配置回复表单供用户填写，本项目也支持了对应的功能。\n\nDify Chatflow 编排的回复内容示例：\n\n\n\n> 注意：\n> \n>  * 你需要自行在 Chatflow 中对 sys.query 进行正确的逻辑处理，区分普通消息、触发表单的消息及提交信息。\n>  * form 标签的 data-format 属性用于指定表单数据的格式，目前支持 json 和 text 两种格式。\n\n按照上面的内容回复后，默认情况下，在用户点击表单的提交按钮后，会将表单的值对象作为消息发送给同一个 Dify 应用，同时会在消息列表中展示。提交消息的示例文本：\n\n\n\n其中，isFormSubmit 字段用于标识这是一个表单提交的消息, 你可以在 Chatflow 编排的条件分支中使用它来进行判断消息类型。\n\n\n\n\n自定义提交消息文本#\n\n如果你不想展示具体的表单值 json 字符串，而是需要自定义发送的消息文本，可以按照下面的指引，在应用配置中进行配置（此配置只影响界面展示，实际提交到 Dify\nChatflow 开始节点的仍然是用户填写的表单值 json 字符串）。\n\n多应用模式\n\n在添加/更新应用配置弹窗中填写字段：\n\n * 表单回复 - 设置为 \"启用\"\n * 提交消息文本 - 用于替换表单值对象的文本，如 \"我提交了一个表单\"\n\n\n\n按照如上配置后，效果如下：\n\n","routePath":"/dify-chat-docs/guide/features/markdown-render","lang":"","toc":[{"text":"深度思考标签","id":"深度思考标签","depth":2,"charIndex":68},{"text":"Chatflow / Workflow 工作流日志","id":"chatflow--workflow-工作流日志","depth":2,"charIndex":160},{"text":"Agent 调用工具","id":"agent-调用工具","depth":2,"charIndex":253},{"text":"知识库引用链接","id":"知识库引用链接","depth":2,"charIndex":330},{"text":"Echarts 图表","id":"echarts-图表","depth":2,"charIndex":407},{"text":"Mermaid 图表","id":"mermaid-图表","depth":2,"charIndex":466},{"text":"文件卡片","id":"文件卡片","depth":2,"charIndex":512},{"text":"回复表单","id":"回复表单","depth":2,"charIndex":554},{"text":"自定义提交消息文本","id":"自定义提交消息文本","depth":3,"charIndex":931}],"domain":"","frontmatter":{},"version":"Latest"},{"id":20,"title":"开场白","content":"#\n\nDify 应用支持配置开场白。\n\n默认情况下，开场白在每个新对话开始前展示，当用户发送消息（即对话开始）后，开场白将被隐藏。\n\n如果你希望在对话开始后展示开场白，可以在应用配置中进行配置：\n\n在界面上编辑应用配置，将 \"对话配置\" 中的 \"开场白展示场景\" 设为 \"总是展示\" 即可。\n\n","routePath":"/dify-chat-docs/guide/features/opening-statement","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":21,"title":"通过 URL 参数预填入消息内容","content":"#\n\n在某些场景下，我们可能希望在第三方应用中嵌入 Dify Chat 的链接，在用户点击链接进入对话后自动将预定好的文字填充到输入框中。\n\n\n实现原理#\n\nDify Chat 会自动获取 URL 中的 sender_text 参数，当参数存在时，会将其 decode 并填充到输入框中。\n\n\n如何使用#\n\n假设当前 Dify Chat 前端的基础路径为 http://localhost:5200/dify-chat/，我们希望在用户进入 Chat 后自动将\nhello 填充到输入框中。\n\n构建链接（指定应用 ID、预填入消息内容、是否开启新会话）：\n\n\n\n你可以将这个链接嵌入到你的应用中，当用户点击该链接时，会自动跳转至 Dify Chat 页面，同时输入框中会自动填充 hello。\n\n\n\n\n注意#\n\n * sender_text 参数的值会自动解码，因此可以包含特殊字符。\n * isNewCvst 参数用于指定是否开启新会话，默认不开启，如果设置为 1 则会开启新会话。","routePath":"/dify-chat-docs/guide/features/sender-text","lang":"","toc":[{"text":"实现原理","id":"实现原理","depth":2,"charIndex":71},{"text":"如何使用","id":"如何使用","depth":2,"charIndex":146},{"text":"注意","id":"注意","depth":2,"charIndex":350}],"domain":"","frontmatter":{},"version":"Latest"},{"id":22,"title":"项目简介","content":"#\n\nDify Chat，一个基于 Dify API 的 AI Web 应用，提供开箱即用的应用配置管理功能，支持运行不同类型的 Dify\n应用，适配深度思考、思维链、图表等多种丰富的输出形式。\n\n如果你觉得这个项目还不错的话，请动动你的小手指点个 Star ⭐️ 吧～\n\n\n\n\n为什么选择 Dify Chat#\n\n如果需要使用 Dify, 但官方 Web 应用的功能不满足需求，或者需要自定义界面，你会怎么选？\n\n * 在源码上二开？如果你后续有对 Dify 进行升级的需求，那么每次升级时的代码合并都会让你心力交瘁\n * 基于官方模板二开？模板中提供的功能早已过时，完全无法跟上 Dify 最新版本的功能\n * 由于以上两者都是基于 Next.js 构建，且没有针对 Turbopack 优化，非常吃内存，热更速度慢。所以你可能会选择自己从零开始。但是为了复刻官方\n   Web 应用的功能，你可能需要花费大量的时间和精力。\n\nDify Chat 围绕以下几个关键特性进行设计：\n\n * 开箱即用\n * 完全开源\n * 灵活架构\n * 主题定制\n * 响应式设计\n * 丰富的内容支持\n\n\n开箱即用#\n\n仅需一个命令即可完成所有安装和启动工作，无需复杂配置。你要做的只是：运行启动命令，填入 Dify API Key，直接开始使用。\n\n\n完全开源#\n\nDify Chat 采用 MIT 开源协议，所有源代码完全开放。你可以：\n\n * Fork 仓库：在 GitHub 上 Fork 原仓库，获得完整的项目代码\n * 自由修改：根据业务需求修改界面、添加新功能或优化现有逻辑\n * 二次开发：基于现有架构进行深度定制，打造专属的 AI 应用平台\n * 贡献代码：将改进的功能通过 Pull Request 回馈社区，帮助项目持续完善\n\n\n灵活架构#\n\nDify Chat 使用前后端分离的设计，充分考虑了用户体验、可扩展性和维护成本，分成两个子包：\n\n * React APP，纯前端应用，提供了直接对接 Dify API 的能力，你只需要填入应用配置，即可直接使用\n * Platform，平台应用，提供了应用配置管理、数据存储和 Dify API 代理等功能，适合对安全性、稳定性要求更高的场景\n\n两者相辅相成，构成从配置管理到用户交互的完整解决方案，你也可以根据实际需求只使用其中一个，与其他系统集成。\n\n从零开始重新构建的 React APP，基于 Rsbuild 的毫秒级热更新，让你不再受限于官方 Web 应用的卡和慢，快速实现个性化需求。\n\n\n主题定制#\n\nDify Chat 基于 TailwindCSS 和 Ant Design 构建，提供了灵活的主题定制能力，让你可以根据品牌需求或个人喜好轻松调整界面风格。\n\n\n响应式设计#\n\nDify Chat 采用响应式设计理念，支持桌面端、平板和移动设备访问，确保在不同屏幕尺寸下都能提供一致的用户体验和功能表现\n\n\n丰富的内容支持#\n\nDify Chat 支持多种内容类型的渲染，让 AI 的回复更加生动和实用：\n\n图片和视频渲染：支持渲染图片和视频内容，在进行内容表达时，丰富多彩的图片和动态视频往往比文字更加深入人心，特别适合教程、演示等场景。\n\n代码高亮：内置代码语法高亮功能，支持多种编程语言，让代码展示更加清晰易读，提升开发者的使用体验。\n\n图表可视化：支持各种类型的图表渲染，如 Mermaid、Echarts 等，帮助用户更好地理解和分析数据。\n\n交互式元素：支持表单等交互组件，让用户可以直接在对话界面中执行操作，提升交互效率。\n\n丰富的内容支持让你可以在 Dify 应用中进行任意编排，以最适合的方式表达信息，无论是技术文档、数据分析报告，还是创意内容创作，都能得到最佳的展示效果。\n\n\n技术栈#\n\n * React v19\n * Next.js v15\n * Prisma ORM v6\n * Ant Design v5\n * Ant Design X v1\n * Rsbuild v1\n * Tailwind CSS v3\n * TypeScript v5\n * Pnpm v10","routePath":"/dify-chat-docs/guide/getting-started/introduction","lang":"","toc":[{"text":"为什么选择 Dify Chat","id":"为什么选择-dify-chat","depth":2,"charIndex":139},{"text":"开箱即用","id":"开箱即用","depth":3,"charIndex":496},{"text":"完全开源","id":"完全开源","depth":3,"charIndex":570},{"text":"灵活架构","id":"灵活架构","depth":3,"charIndex":769},{"text":"主题定制","id":"主题定制","depth":3,"charIndex":1079},{"text":"响应式设计","id":"响应式设计","depth":3,"charIndex":1167},{"text":"丰富的内容支持","id":"丰富的内容支持","depth":3,"charIndex":1240},{"text":"技术栈","id":"技术栈","depth":2,"charIndex":1585}],"domain":"","frontmatter":{},"version":"Latest"},{"id":23,"title":"Platform 介绍","content":"#\n\nDify Chat Platform 是在 v0.5.0 中新增的一个子包，它是一个基于 Dify 的应用平台，提供了以下功能：\n\n * 应用配置的增删改查（支持持久化存储）\n * 可供客户端访问的应用配置 API\n * Dify API 的代理服务，客户端可以通过一个 app_id 和 Platform 交互，规避 Dify API Key 的泄露问题\n\n使用管理员账号登录后，你可以看到如下的界面：\n\n\n\n点击新增按钮，填写 API Base 和 Key, 新增一个应用：\n\n\n\n点击确定后，你可以在应用列表中看到新增的应用：\n\n\n\n回到前端应用刷新页面，你就可以看到新增的应用了。","routePath":"/dify-chat-docs/guide/getting-started/platform","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":24,"title":"前置准备","content":"#\n\n\n部署环境#\n\n在开始部署前，你需要准备好以下环境：\n\n * Node.js >= 20\n * Pnpm >= 10.8.1\n\n\n数据库#\n\n最后启动项目即可。","routePath":"/dify-chat-docs/guide/getting-started/ready","lang":"","toc":[{"text":"部署环境","id":"部署环境","depth":2,"charIndex":3},{"text":"数据库","id":"数据库","depth":2,"charIndex":67}],"domain":"","frontmatter":{},"version":"Latest"},{"id":25,"title":"初步体验","content":"#\n\n为方便演示，我们在 Github Pages 上部署了一个调试模式的应用，你可以点击\nhttps://lexmin0412.github.io/dify-chat 来访问。\n\n> 在调试模式下，Dify Chat 不会将你填入的任何信息上传到开发者服务器，所有数据都缓存在本地，前端页面直接与 Dify API 对接，你可以放心体验。\n\n进入演示站点后，你会看到应用列表的初始界面, 页面右下角有一个调试按钮。\n\n\n\n\n准备#\n\n首先，你需要在 Dify 控制台获取几个关键变量：\n\n变量         说明\nAPI Base   Dify API 请求前缀, 如果你使用的是 Dify 官方提供的云服务，则为\n           https://api.dify.ai/v1\nApi Key    Dify API 密钥，用于访问对应应用的 API, Dify 应用和 API 密钥是一对多的关系\n\n进入 Dify 的应用详情，点击左侧的 访问 API：\n\n\n\nAPI 服务器 后展示的域名即为 API Base 变量的值。\n\n点击右侧的 API 密钥 按钮，即可看到 API Key 的管理弹窗：\n\n\n\n你可以选择创建一个新的 API Key，或者复制现有的 API Key。\n\n\n\n完成以上步骤后，我们将会得到如下信息：\n\n * API Base: https://api.dify.ai/v1 OR ${SELF_HOSTED_API_DOMAIN}/v1\n * API Key: app-YOUR_API_KEY\n\n\n填写应用配置#\n\n点击页面右下角的 \"调试按钮\"：\n\n\n\n可以看到调试模式的数据配置抽屉, 点击输入框下方的 \"使用示例配置\" 按钮：\n\n\n\n依次填入你的 apiBase 和 apiKey：\n\n\n\n点击下方的 \"保存配置\" 按钮，提示 “调试配置保存成功”，在应用列表中会多出一条数据：\n\n\n\n点击应用卡片，即可进入应用详情页开始对话了～\n\n","routePath":"/dify-chat-docs/guide/getting-started/trial","lang":"","toc":[{"text":"准备","id":"准备","depth":2,"charIndex":212},{"text":"填写应用配置","id":"填写应用配置","depth":2,"charIndex":668}],"domain":"","frontmatter":{},"version":"Latest"},{"id":26,"title":"从 v0.3.0 迁移","content":"#\n\n在本小节，我们将介绍如何从 v0.3.0 升级。\n\n如果你是老版本的 React APP 用户，请根据你的具体情况，进行正确的操作：\n\n * 如果你没有对代码进行过任何修改，请直接拉取 v0.4.0 Tag 后重新构建部署即可，本次升级对你来说将是无感的\n * 如果你修改过代码并且想要使用当前版本新增的功能，那么请遵循下面的步骤进行升级\n\nWARNING\n\n在 v0.4.0 版本中，我们完全弃用了 DifyChatProvider 和 useDifyChat, 这简化了组件嵌套关系。\n\n原来的 DifyChatProvider 承载的配置初始化功能，现在被分拆为几个部分。\n\n\n1. 初始化运行模式#\n\n在 packages/react-app/src/App.tsx 中，初始化运行模式：\n\n\n\n\n2. 初始化应用配置管理服务#\n\n现在的应用配置管理服务将会在需要使用时自动引入，依据不同的运行模式，入口分别如下：\n\n * 单应用模式：/packages/react-app/src/services/app/singleApp/index.ts\n * 多应用模式：/packages/react-app/src/services/app/multiApp/index.ts\n\n你要做的是，在上面的入口文件中，导出你所使用的 appService 即可。\n\n以多应用模式为例：\n\n\n\n\n3. 初始化 userId 和 enableSetting#\n\n在 v0.4.0 中，新增了一个真正意义上的授权登录页面，你可以查看 自定义用户信息 文档, 自定义你的用户信息获取和更新逻辑。","routePath":"/dify-chat-docs/guide/migrate/from_v0.3.0","lang":"","toc":[{"text":"1. 初始化运行模式","id":"1-初始化运行模式","depth":2,"charIndex":294},{"text":"2. 初始化应用配置管理服务","id":"2-初始化应用配置管理服务","depth":2,"charIndex":355},{"text":"3. 初始化 `userId` 和 `enableSetting`","id":"3-初始化-userid-和-enablesetting","depth":2,"charIndex":-1}],"domain":"","frontmatter":{},"version":"Latest"},{"id":27,"title":"从历史版本升级","content":"#\n\nv0.5.0 引入了应用配置的持久化存储，完成了用户端和管理端的功能拆分，移除了 Next.js 版本的用户端实现，是一个跨越性的版本。","routePath":"/dify-chat-docs/guide/start/migrate","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":28,"title":"Hello world!","content":"#\n\n\nStart#\n\nWrite something to build your own docs! 🎁","routePath":"/dify-chat-docs/hello","lang":"","toc":[{"text":"Start","id":"start","depth":2,"charIndex":3}],"domain":"","frontmatter":{},"version":"Latest"},{"id":30,"title":"`@dify-chat/api`","content":"@dify-chat/api#\n\n\n\n@dify-chat/api 是 Dify Chat 项目中的一个包，它提供了一套完整的方法来操作 Dify 应用，包括获取应用信息、管理会话、发送消息等功能。\n\n下面将介绍如何在你的应用中集成和使用它。\n\n\n安装#\n\n通过 npm/yarn/pnpm 安装：\n\n\n\n\n基本使用#\n\n\n\n\nAPI 实例配置#\n\n实例化 DifyApi 时需要提供以下配置：\n\n\n\n\nAPI 方法#\n\n> 注意：开发此包的初衷是为了实现主项目 Dify Chat 的相关功能，所以并不是所有的官方 API 都会存在对应的方法。如需调用其他\n> API，请自行参考官方文档。\n\n\n更新 API 配置#\n\n当需要切换应用时，可以更新 API 配置。\n\n\n\n\n获取应用基本信息#\n\n\n\n返回值类型：\n\n\n\n\n获取应用 Meta 信息#\n\n\n\n返回值类型：\n\n\n\n\n获取应用参数#\n\n\n\n返回值类型：\n\n\n\n\n会话管理#\n\n获取会话列表#\n\n\n\n参数：\n\n\n\n返回值类型：\n\n\n\n重命名会话#\n\n\n\n参数：\n\n\n\n删除会话#\n\n\n\n获取会话历史消息#\n\n\n\n返回值类型：\n\n\n\n\n消息相关#\n\n发送消息#\n\n\n\n参数：\n\n\n\n文件类型定义#\n\n\n\n停止生成#\n\n\n\n获取下一轮建议问题#\n\n\n\n返回值类型：\n\n\n\n消息反馈#\n\n\n\n参数：\n\n\n\n\n文件操作#\n\n上传文件#\n\n\n\n参数：\n\n * file: 浏览器 File 对象\n\n返回值类型：\n\n\n\n\n语音相关#\n\n文字转语音#\n\n\n\n参数：\n\n\n\n语音转文字#\n\n\n\n参数：\n\n * audioFile: 语音文件。支持格式：['mp3', 'mp4', 'mpeg', 'mpga', 'm4a', 'wav', 'webm']\n   文件大小限制：15MB\n\n返回值类型：\n\n\n\n\n工作流相关#\n\n执行 workflow#\n\n\n\n参数：\n\n\n\n获取 workflow 执行情况#\n\n\n\n参数：\n\n\n\n响应体：\n\n\n\n\n文本生成相关#\n\n执行文本生成#\n\n\n\n参数：\n\n\n\n\n完整事件类型#\n\nAPI 响应中包含各种事件类型，完整定义如下：\n\n\n\n\n示例：完整的对话流程#\n\n\n\n\n注意事项#\n\n 1. 所有 API 方法均返回 Promise，可以使用 async/await 或 .then() 处理\n 2. 消息发送采用流式响应，需要处理 ReadableStream\n 3. API 密钥格式通常为 app-XXXXXXXX，需要从 Dify 控制台获取\n 4. 用户ID可以是任意字符串，用于标识用户身份，便于区分不同用户的会话","routePath":"/dify-chat-docs/packages/api","lang":"","toc":[{"text":"安装","id":"安装","depth":2,"charIndex":123},{"text":"基本使用","id":"基本使用","depth":2,"charIndex":153},{"text":"API 实例配置","id":"api-实例配置","depth":2,"charIndex":163},{"text":"API 方法","id":"api-方法","depth":2,"charIndex":201},{"text":"更新 API 配置","id":"更新-api-配置","depth":3,"charIndex":298},{"text":"获取应用基本信息","id":"获取应用基本信息","depth":3,"charIndex":336},{"text":"获取应用 Meta 信息","id":"获取应用-meta-信息","depth":3,"charIndex":360},{"text":"获取应用参数","id":"获取应用参数","depth":3,"charIndex":388},{"text":"会话管理","id":"会话管理","depth":3,"charIndex":410},{"text":"获取会话列表","id":"获取会话列表","depth":4,"charIndex":417},{"text":"重命名会话","id":"重命名会话","depth":4,"charIndex":445},{"text":"删除会话","id":"删除会话","depth":4,"charIndex":462},{"text":"获取会话历史消息","id":"获取会话历史消息","depth":4,"charIndex":471},{"text":"消息相关","id":"消息相关","depth":3,"charIndex":495},{"text":"发送消息","id":"发送消息","depth":4,"charIndex":502},{"text":"文件类型定义","id":"文件类型定义","depth":4,"charIndex":518},{"text":"停止生成","id":"停止生成","depth":4,"charIndex":529},{"text":"获取下一轮建议问题","id":"获取下一轮建议问题","depth":4,"charIndex":538},{"text":"消息反馈","id":"消息反馈","depth":4,"charIndex":562},{"text":"文件操作","id":"文件操作","depth":3,"charIndex":579},{"text":"上传文件","id":"上传文件","depth":4,"charIndex":586},{"text":"语音相关","id":"语音相关","depth":3,"charIndex":633},{"text":"文字转语音","id":"文字转语音","depth":4,"charIndex":640},{"text":"语音转文字","id":"语音转文字","depth":4,"charIndex":657},{"text":"工作流相关","id":"工作流相关","depth":3,"charIndex":776},{"text":"执行 workflow","id":"执行-workflow","depth":4,"charIndex":784},{"text":"获取 workflow 执行情况","id":"获取-workflow-执行情况","depth":4,"charIndex":807},{"text":"文本生成相关","id":"文本生成相关","depth":3,"charIndex":844},{"text":"执行文本生成","id":"执行文本生成","depth":4,"charIndex":853},{"text":"完整事件类型","id":"完整事件类型","depth":2,"charIndex":872},{"text":"示例：完整的对话流程","id":"示例完整的对话流程","depth":2,"charIndex":909},{"text":"注意事项","id":"注意事项","depth":2,"charIndex":925}],"domain":"","frontmatter":{},"version":"Latest"},{"id":31,"title":"`@dify-chat/core`","content":"@dify-chat/core#\n\n\n\n@dify-chat/core 是 Dify Chat 项目中的核心包，它提供了应用、对话等全局上下文的注入和获取功能。\n\n下面将介绍如何在你的应用中集成和使用它。\n\n\n安装#\n\n通过 npm/yarn/pnpm 安装：\n\n\n\n\n使用方法#\n\n\n全局上下文#\n\nAppContext#\n\nAppContext 是应用上下文，提供了当前应用配置的获取和更新功能。\n\nAppContextProvider\n\n在应用切换功能的最上层组件中使用 AppContextProvider 提供应用上下文：\n\n\n\nuseAppContext hook\n\n在你的子组件中使用 useAppContext 钩子获取应用上下文：\n\n\n\n对话上下文#\n\nConversationContext 是对话上下文，提供了对话相关的功能，包括获取/更新对话列表、获取/更新当前对话 ID、获取当前对话信息等。\n\nConversationContextProvider\n\n在具备对话切换功能的最上层组件中使用 ConversationContextProvider 提供对话上下文：\n\n\n\nuseConversationsContext hook\n\n在你的子组件中使用 useConversationsContext 钩子获取对话上下文：\n\n","routePath":"/dify-chat-docs/packages/core","lang":"","toc":[{"text":"安装","id":"安装","depth":2,"charIndex":104},{"text":"使用方法","id":"使用方法","depth":2,"charIndex":134},{"text":"全局上下文","id":"全局上下文","depth":3,"charIndex":142},{"text":"AppContext","id":"appcontext","depth":4,"charIndex":150},{"text":"对话上下文","id":"对话上下文","depth":4,"charIndex":327}],"domain":"","frontmatter":{},"version":"Latest"},{"id":32,"title":"介绍","content":"#\n\nDify Chat 衍生出以下子包，可通过 npm 独立安装使用。\n\n * @dify-chat/api\n * @dify-chat/core\n * @dify-chat/theme","routePath":"/dify-chat-docs/packages/","lang":"","toc":[],"domain":"","frontmatter":{},"version":"Latest"},{"id":33,"title":"`@dify-chat/theme`","content":"@dify-chat/theme#\n\n\n\n@dify-chat/theme 是 Dify Chat 项目的主题包，它提供了一套主题管理的完整方案，包括主题上下文 hook、主题切换组件、主题状态管理等。\n\n\n主要功能#\n\n * 主题模式切换（系统/浅色/深色）\n * 完整的主题上下文管理\n * 暗黑模式自动适配\n\n\n安装#\n\n通过 npm/yarn/pnpm 安装：\n\n\n\n\nAPI#\n\n\n<ThemeContextProvider />#\n\n主题上下文容器。\n\n> 说明：只有在上层组件使用了 ThemeContextProvider 包裹应用，才能在子组件中使用主题相关的功能。\n\n在最外层组件中使用 ThemeContextProvider 包裹应用：\n\n\n\n\n<ThemeSelector />#\n\n主题选择器组件。\n\n默认情况下，ThemeContextProvider 中已经提供了自适应系统主题的能力。如果你需要支持用户手动切换主题模式，可以引入主题选择器：\n\n\n\n\nuseThemeContext()#\n\n获取主题上下文 hook。\n\n返回值：\n\n * theme: 当前应用的主题，值为 'light' | 'dark'\n * themeMode: 当前主题模式，值为 'light' | 'dark' | 'system'\n * setThemeMode: 设置主题模式，接受一个 'light' | 'dark' | 'system' 类型的参数\n\n你可以使用 useThemeContext hook 获取当前应用的主题：\n\n\n\n也可以在组件中使用 setThemeMode 方法，自定义切换主题模式：\n\n\n\n\n其他导出的成员#\n\n枚举\n\n * ThemeEnum: 主题枚举\n * ThemeModeEnum: 主题模式枚举\n * ThemeModeLabelEnum: 主题模式文本枚举\n\n常量\n\n * ThemeModeOptions : 主题模式选项\n\n类型\n\n * IThemeContext: 主题上下文类型\n * IThemeMode: 主题模式类型\n * ICurrentTheme: 当前主题类型\n\n使用示例:\n\n","routePath":"/dify-chat-docs/packages/theme","lang":"","toc":[{"text":"主要功能","id":"主要功能","depth":2,"charIndex":103},{"text":"安装","id":"安装","depth":2,"charIndex":158},{"text":"API","id":"api","depth":2,"charIndex":188},{"text":"`<ThemeContextProvider />`","id":"themecontextprovider-","depth":3,"charIndex":-1},{"text":"`<ThemeSelector />`","id":"themeselector-","depth":3,"charIndex":-1},{"text":"`useThemeContext()`","id":"usethemecontext","depth":3,"charIndex":-1},{"text":"其他导出的成员","id":"其他导出的成员","depth":3,"charIndex":718}],"domain":"","frontmatter":{},"version":"Latest"}]